(self.webpackChunksemantic_composer=self.webpackChunksemantic_composer||[]).push([[3079],{381:(e,t,n)=>{var r="Expected a function",o=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,c=parseInt,s="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,u=s||d||Function("return this")(),f=Object.prototype.toString,p=Math.max,h=Math.min,g=function(){return u.Date.now()};function v(e,t,n){var o,l,a,i,c,s,d=0,u=!1,f=!1,v=!0;if("function"!=typeof e)throw new TypeError(r);function y(t){var n=o,r=l;return o=l=void 0,d=t,i=e.apply(r,n)}function m(e){var n=e-s;return void 0===s||n>=t||n<0||f&&e-d>=a}function x(){var e=g();if(m(e))return R(e);c=setTimeout(x,function(e){var n=t-(e-s);return f?h(n,a-(e-d)):n}(e))}function R(e){return c=void 0,v&&o?y(e):(o=l=void 0,i)}function $(){var e=g(),n=m(e);if(o=arguments,l=this,s=e,n){if(void 0===c)return function(e){return d=e,c=setTimeout(x,t),u?y(e):i}(s);if(f)return c=setTimeout(x,t),y(s)}return void 0===c&&(c=setTimeout(x,t)),i}return t=w(t)||0,b(n)&&(u=!!n.leading,a=(f="maxWait"in n)?p(w(n.maxWait)||0,t):a,v="trailing"in n?!!n.trailing:v),$.cancel=function(){void 0!==c&&clearTimeout(c),d=0,o=s=l=c=void 0},$.flush=function(){return void 0===c?i:R(g())},$}function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function w(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==f.call(e)}(e))return NaN;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=a.test(e);return n||i.test(e)?c(e.slice(2),n?2:8):l.test(e)?NaN:+e}e.exports=function(e,t,n){var o=!0,l=!0;if("function"!=typeof e)throw new TypeError(r);return b(n)&&(o="leading"in n?!!n.leading:o,l="trailing"in n?!!n.trailing:l),v(e,t,{leading:o,maxWait:t,trailing:l})}},3079:(e,t,n)=>{"use strict";n.d(t,{defineFeature:()=>F});var r=n(4478),o=n(2025),l=n(7184),a=n(616),i=n(2e3),c=n(2420),s=n(8387),d=n(381),u=n(6667),f=n(1310);var p=Object.defineProperty,h=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,b=(e,t,n)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w=(e,t)=>{for(var n in t||(t={}))g.call(t,n)&&b(e,n,t[n]);if(h)for(var n of h(t))v.call(t,n)&&b(e,n,t[n]);return e};function y(e,t){return Object.assign(e,{meta:w({package:"@milkdown/components"},t)}),e}var m=Object.defineProperty,x=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable,C=(e,t,n)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const _=(0,r.Qx)(((e,t)=>{for(var n in t||(t={}))R.call(t,n)&&C(e,n,t[n]);if(x)for(var n of x(t))$.call(t,n)&&C(e,n,t[n]);return e})({},{renderButton:e=>{switch(e){case"add_row":case"add_col":return"+";case"delete_row":case"delete_col":return"-";case"align_col_left":return"left";case"align_col_center":return"center";case"align_col_right":return"right";case"col_drag_handle":case"row_drag_handle":return"="}}}),"tableBlockConfigCtx");function k(e,t){for(let n=0;n<e.childCount;n++)if(e.child(n)===t)return n;return-1}function H(e,t){let[n,r]=t;const o=e.current;if(!o)return;const l=o.querySelectorAll("tr"),a=l[n];if(!a)return;const i=l[0];if(!i)return;const c=i.children[r];if(!c)return;const s=a.children[r];return s?{row:a,col:s,headerCol:c}:void 0}function I(e){let{refs:t,index:n,before:r,after:o}=e;const{contentWrapperRef:l,colHandleRef:a,hoverIndex:i}=t,c=a.current;if(!c)return;i.current=n;const s=H(l,n);if(!s)return;const{headerCol:d}=s;c.dataset.show="true",r&&r(c),(0,u.rD)(d,c,{placement:"top"}).then((e=>{let{x:t,y:n}=e;Object.assign(c.style,{left:`${t}px`,top:`${n}px`}),o&&o(c)}))}function O(e){let{refs:t,index:n,before:r,after:o}=e;const{contentWrapperRef:l,rowHandleRef:a,hoverIndex:i}=t,c=a.current;if(!c)return;i.current=n;const s=H(l,n);if(!s)return;const{row:d}=s;c.dataset.show="true",r&&r(c),(0,u.rD)(d,c,{placement:"left"}).then((e=>{let{x:t,y:n}=e;Object.assign(c.style,{left:`${t}px`,top:`${n}px`}),o&&o(c)}))}function B(e){const{dragPreviewRef:t,tableWrapperRef:n,contentWrapperRef:r,yLineHandleRef:o,xLineHandleRef:l,colHandleRef:a,rowHandleRef:i}=e,c=t.current;if(!c)return;const s=n.current;if(!s)return;const d=r.current;if(!d)return;const u=d.querySelector("tbody");if(!u)return;const f=c.querySelector("tbody");if(!f)return;const p=o.current;if(!p)return;const h=l.current;if(!h)return;const g=a.current;if(!g)return;const v=i.current;if(!v)return;return{preview:c,wrapper:s,content:d,contentRoot:u,previewRoot:f,yHandle:p,xHandle:h,colHandle:g,rowHandle:v}}function q(e,t,n,r){const o=null==n?void 0:n.get(f.kY);if(!(null==o?void 0:o.editable))return;t.stopPropagation(),t.dataTransfer&&(t.dataTransfer.effectAllowed="move");const l=B(e);l&&requestAnimationFrame((()=>{r(l)}))}function S(e,t,n){const{dragPreviewRef:r,yLineHandleRef:l,xLineHandleRef:a,dragInfo:i}=e,s=(0,c.KT)(),p=(0,c.Kr)((()=>s.current.getRootNode()),[s]),h=(0,c.Kr)((()=>function(e,t){return n=>{q(e,n,t,(t=>{let{preview:r,content:o,previewRoot:l,yHandle:a,xHandle:i,colHandle:c,rowHandle:s}=t;var d;const{hoverIndex:u,dragInfo:f}=e;i.dataset.displayType="indicator",a.dataset.show="false",c.dataset.show="false",null==(d=s.querySelector(".button-group"))||d.setAttribute("data-show","false");const[p]=u.current;f.current={startCoords:[n.clientX,n.clientY],startIndex:p,endIndex:p,type:"row"},r.dataset.direction="vertical";const h=o.querySelectorAll("tr");for(;l.firstChild;)l.removeChild(l.firstChild);const g=h[p];if(!g)return;l.appendChild(g.cloneNode(!0));const v=g.getBoundingClientRect().height,{width:b}=o.querySelector("tbody").getBoundingClientRect();Object.assign(r.style,{width:`${b}px`,height:`${v}px`}),r.dataset.show="true"}))}}(e,t)),[e]),g=(0,c.Kr)((()=>function(e,t){return n=>{q(e,n,t,(t=>{let{preview:r,content:o,previewRoot:l,yHandle:a,xHandle:i,colHandle:c,rowHandle:s}=t;var d;const{hoverIndex:u,dragInfo:f}=e;i.dataset.show="false",a.dataset.displayType="indicator",s.dataset.show="false",null==(d=c.querySelector(".button-group"))||d.setAttribute("data-show","false");const[p,h]=u.current;f.current={startCoords:[n.clientX,n.clientY],startIndex:h,endIndex:h,type:"col"},r.dataset.direction="horizontal";const g=o.querySelectorAll("tr");for(;l.firstChild;)l.removeChild(l.firstChild);let v;Array.from(g).forEach((e=>{const t=e.children[h];if(!t)return;void 0===v&&(v=t.getBoundingClientRect().width);const n=t.parentElement.cloneNode(!1),r=t.cloneNode(!0);n.appendChild(r),l.appendChild(n)}));const{height:b}=o.querySelector("tbody").getBoundingClientRect();Object.assign(r.style,{width:`${v}px`,height:`${b}px`}),r.dataset.show="true"}))}}(e,t)),[e]);return(0,c.vJ)((()=>{const c=()=>{const e=r.current;if(!e)return;if("false"===e.dataset.show)return;const t=null==e?void 0:e.querySelector("tbody");for(;null==t?void 0:t.firstChild;)null==t||t.removeChild(t.firstChild);e&&(e.dataset.show="false")},s=()=>{var c;const s=r.current;if(!s)return;const d=l.current;if(!d)return;const u=a.current;if(!u)return;const p=i.current;if(!p)return;if(!t)return;if("false"===s.dataset.show)return;if(!e.colHandleRef.current)return;if(!e.rowHandleRef.current)return;if(d.dataset.show="false",u.dataset.show="false",p.startIndex===p.endIndex)return;const h=t.get(f.MD),g={from:p.startIndex,to:p.endIndex,pos:(null!=(c=null==n?void 0:n())?c:0)+1};if("col"===p.type){h.call(o.cq.key,{pos:g.pos,index:p.startIndex}),h.call(o.tt.key,g);const t=[0,p.endIndex];I({refs:e,index:t})}else{h.call(o.kr.key,{pos:g.pos,index:p.startIndex}),h.call(o.lW.key,g);const t=[p.endIndex,0];O({refs:e,index:t})}requestAnimationFrame((()=>{t.get(f.kY).focus()}))},h=function(e){return d((t=>{const n=B(e);if(!n)return;const{preview:r,content:o,contentRoot:l,xHandle:a,yHandle:i}=n,{dragInfo:c,hoverIndex:s}=e;if("false"===r.dataset.show)return;const d=H(e.contentWrapperRef,s.current);if(!d)return;const f=l.querySelector("tr");if(!f)return;const p=c.current;if(!p)return;if(!l.offsetParent)return;const h=l.offsetParent.offsetTop,g=l.offsetParent.offsetLeft;if("col"===p.type){const e=d.col.getBoundingClientRect().width,{left:n,width:a}=l.getBoundingClientRect(),c=g-n,s=t.clientX+c-e/2,v=t.clientX+c+e/2,[b]=p.startCoords,w=b<t.clientX?"right":"left";r.style.top=`${h}px`;const y=s<n+c-20?n+c-20:s>n+a+c-e+20?n+a+c-e+20:s;r.style.left=`${y}px`;const m=Array.from(f.children),x=m.find(((e,t)=>{const r=e.getBoundingClientRect();let o=r.left+g-n,l=r.right+g-n;if("right"===w){if(o+=r.width/2,l+=r.width/2,o<=v&&l>=v)return!0;if(t===f.children.length-1&&v>l)return!0}else{if(o-=r.width/2,l-=r.width/2,o<=s&&l>=s)return!0;if(0===t&&s<o)return!0}return!1}));if(x){const e=i.getBoundingClientRect().width,t=o.getBoundingClientRect(),n=m.indexOf(x);p.endIndex=n,(0,u.rD)(x,i,{placement:"left"===w?"left":"right",middleware:[(0,u.cY)("left"===w?-1*e:0)]}).then((e=>{let{x:n}=e;i.dataset.show="true",Object.assign(i.style,{height:`${t.height}px`,left:`${n}px`,top:`${h}px`})}))}}else if("row"===p.type){const e=d.row.getBoundingClientRect().height,{top:n,height:i}=l.getBoundingClientRect(),c=h-n,s=t.clientY+c-e/2,f=t.clientY+c+e/2,[v,b]=p.startCoords,w=b<t.clientY?"down":"up",y=s<n+c-20?n+c-20:s>n+i+c-e+20?n+i+c-e+20:s;r.style.top=`${y}px`,r.style.left=`${g}px`;const m=Array.from(l.querySelectorAll("tr")),x=m.find(((e,t)=>{const r=e.getBoundingClientRect();let o=r.top+h-n,l=r.bottom+h-n;if("down"===w){if(o+=r.height/2,l+=r.height/2,o<=f&&l>=f)return!0;if(t===m.length-1&&f>l)return!0}else{if(o-=r.height/2,l-=r.height/2,o<=s&&l>=s)return!0;if(0===t&&s<o)return!0}return!1}));if(x){const e=a.getBoundingClientRect().height,t=o.getBoundingClientRect(),n=m.indexOf(x);p.endIndex=n,(0,u.rD)(x,a,{placement:"up"===w?"top":"bottom",middleware:[(0,u.cY)("up"===w?-1*e:0)]}).then((e=>{let{y:n}=e;a.dataset.show="true",Object.assign(a.style,{width:`${t.width}px`,top:`${n}px`})}))}}}),20)}(e);return p.addEventListener("dragover",h),p.addEventListener("dragend",c),p.addEventListener("drop",s),()=>{p.removeEventListener("dragover",h),p.removeEventListener("dragend",c),p.removeEventListener("drop",s)}}),[]),{dragRow:h,dragCol:g}}function A(e,t){return d((n=>{if(!(null==t?void 0:t.editable))return;const{contentWrapperRef:r,yLineHandleRef:o,xLineHandleRef:l,colHandleRef:i,rowHandleRef:c,hoverIndex:s,lineHoverIndex:d}=e,f=o.current;if(!f)return;const p=l.current;if(!p)return;const h=r.current;if(!h)return;const g=c.current;if(!g)return;const v=i.current;if(!v)return;const b=function(e,t){var r,o,l;if(t)try{const n=t.posAtCoords({left:e.clientX,top:e.clientY});if(!n)return;const i=null==n?void 0:n.inside;if(null==i||i<0)return;const c=t.state.doc.resolve(i),s=t.state.doc.nodeAt(i);if(!s)return;const d=["table_cell","table_header"],u=["table_row","table_header_row"],f=d.includes(s.type.name)?s:null==(r=(0,a.gi)((e=>d.includes(e.type.name)))(c))?void 0:r.node,p=null==(o=(0,a.gi)((e=>u.includes(e.type.name)))(c))?void 0:o.node,h=null==(l=(0,a.gi)((e=>"table"===e.type.name))(c))?void 0:l.node;if(!f||!p||!h)return;const g=k(p,f);return[k(h,p),g]}catch(n){return}}(n,t);if(!b)return;const w=H(r,b);if(!w)return;const[y,m]=b,x=w.col.getBoundingClientRect(),R=Math.abs(n.clientX-x.left)<8,$=Math.abs(x.right-n.clientX)<8,C=Math.abs(n.clientY-x.top)<8,_=Math.abs(x.bottom-n.clientY)<8,B=R||$||C||_,q=g.querySelector(".button-group"),S=v.querySelector(".button-group");if(q&&(q.dataset.show="false"),S&&(S.dataset.show="false"),B){const e=h.getBoundingClientRect();g.dataset.show="false",v.dataset.show="false",p.dataset.displayType="tool",f.dataset.displayType="tool";const t=f.getBoundingClientRect().width,n=p.getBoundingClientRect().height;return R||$?(d.current[1]=R?m:m+1,(0,u.rD)(w.col,f,{placement:R?"left":"right",middleware:[(0,u.cY)(R?-1*t:0)]}).then((t=>{let{x:n}=t;f.dataset.show="true",Object.assign(f.style,{height:`${e.height}px`,left:`${n}px`})}))):f.dataset.show="false",void(0!==b[0]&&(C||_)?(d.current[0]=C?y:y+1,(0,u.rD)(w.row,p,{placement:C?"top":"bottom",middleware:[(0,u.cY)(C?-1*n:0)]}).then((t=>{let{y:n}=t;p.dataset.show="true",Object.assign(p.style,{width:`${e.width}px`,top:`${n}px`})}))):p.dataset.show="false")}d.current=[-1,-1],f.dataset.show="false",p.dataset.show="false",g.dataset.show="true",v.dataset.show="true",O({refs:e,index:b}),I({refs:e,index:b}),s.current=b}),20)}function j(e,t){const n=(0,c.Kr)((()=>A(e,t)),[]),r=(0,c.Kr)((()=>function(e){return()=>{const{rowHandleRef:t,colHandleRef:n,yLineHandleRef:r,xLineHandleRef:o}=e;setTimeout((()=>{const e=t.current;if(!e)return;const l=n.current;if(!l)return;const a=r.current;if(!a)return;const i=o.current;i&&(e.dataset.show="false",l.dataset.show="false",a.dataset.show="false",i.dataset.show="false")}),200)}}(e)),[]);return{pointerMove:n,pointerLeave:r}}y(_,{displayName:"Config<table-block>",group:"TableBlock"});const P=e=>{let{view:t,ctx:n,getPos:r,node:l,config:d}=e;const u=(0,c.KT)(),p=(0,c.li)(),h=(0,c.li)(),g=(0,c.li)(),v=(0,c.li)(),b=(0,c.li)(),w=(0,c.li)(),y=(0,c.li)(),m=(0,c.li)([0,0]),x=(0,c.li)([-1,-1]),R=(0,c.li)(),$=(0,c.Kr)((()=>({dragPreviewRef:y,tableWrapperRef:w,contentWrapperRef:p,yLineHandleRef:b,xLineHandleRef:v,colHandleRef:h,rowHandleRef:g,hoverIndex:m,lineHoverIndex:x,dragInfo:R})),[]);(0,c.Nf)((()=>{const e=p.current;if(!e)return;const r=u.current.querySelector("[data-content-dom]");r&&e.appendChild(r),(null==t?void 0:t.editable)&&function(e,t,n){if(!t)return;if(!n)return;const{selection:r}=t.get(f.kY).state;if(!(r instanceof i.rn))return;const{$from:l}=r,c=(0,o.UI)(l);if(c&&c.node===n)if(r.isColSelection()){const{$head:t}=r;I({refs:e,index:[0,t.index(t.depth-1)],before:e=>{var t;null==(t=e.querySelector(".button-group"))||t.setAttribute("data-show","true")}})}else if(r.isRowSelection()){const{$head:t}=r,n=(0,a.gi)((e=>"table_row"===e.type.name||"table_header_row"===e.type.name))(t);if(!n)return;const o=k(c.node,n.node);O({refs:e,index:[o,0],before:e=>{var t;o>0&&(null==(t=e.querySelector(".button-group"))||t.setAttribute("data-show","true"))}})}}($,n,l)}),[]);const{pointerLeave:C,pointerMove:_}=j($,t),{dragRow:H,dragCol:B}=S($,n,r),{onAddRow:q,onAddCol:A,selectCol:P,selectRow:D,deleteSelected:L,onAlign:M}=function(e,t,n){const{xLineHandleRef:r,contentWrapperRef:l,colHandleRef:a,rowHandleRef:i,hoverIndex:s,lineHoverIndex:d}=e;return{onAddRow:(0,c.hb)((()=>{var e,a,i;if(!t)return;const c=r.current;if(!c)return;const[s]=d.current;if(s<0)return;if(!t.get(f.kY).editable)return;const u=Array.from(null!=(a=null==(e=l.current)?void 0:e.querySelectorAll("tr"))?a:[]),p=t.get(f.MD),h=(null!=(i=null==n?void 0:n())?i:0)+1;u.length===s?(p.call(o.kr.key,{pos:h,index:s-1}),p.call(o.RP.key)):(p.call(o.kr.key,{pos:h,index:s}),p.call(o.kD.key)),p.call(o.kr.key,{pos:h,index:s}),c.dataset.show="false"}),[]),onAddCol:(0,c.hb)((()=>{var e,a,i,c;if(!t)return;if(!r.current)return;const[s,u]=d.current;if(u<0)return;if(!t.get(f.kY).editable)return;const p=Array.from(null!=(i=null==(a=null==(e=l.current)?void 0:e.querySelector("tr"))?void 0:a.children)?i:[]),h=t.get(f.MD),g=(null!=(c=null==n?void 0:n())?c:0)+1;p.length===u?(h.call(o.cq.key,{pos:g,index:u-1}),h.call(o.vh.key)):(h.call(o.cq.key,{pos:g,index:u}),h.call(o._r.key)),h.call(o.cq.key,{pos:g,index:u})}),[]),selectCol:(0,c.hb)((()=>{var e,r;if(!t)return;const[l,i]=s.current,c=t.get(f.MD),d=(null!=(e=null==n?void 0:n())?e:0)+1;c.call(o.cq.key,{pos:d,index:i});const u=null==(r=a.current)?void 0:r.querySelector(".button-group");u&&(u.dataset.show="true"===u.dataset.show?"false":"true")}),[]),selectRow:(0,c.hb)((()=>{var e,r;if(!t)return;const[l,a]=s.current,c=t.get(f.MD),d=(null!=(e=null==n?void 0:n())?e:0)+1;c.call(o.kr.key,{pos:d,index:l});const u=null==(r=i.current)?void 0:r.querySelector(".button-group");u&&l>0&&(u.dataset.show="true"===u.dataset.show?"false":"true")}),[]),deleteSelected:(0,c.hb)((e=>{t&&t.get(f.kY).editable&&(e.preventDefault(),e.stopPropagation(),t.get(f.MD).call(o.pK.key),requestAnimationFrame((()=>{t.get(f.kY).focus()})))}),[]),onAlign:(0,c.hb)((e=>n=>{t&&t.get(f.kY).editable&&(n.preventDefault(),n.stopPropagation(),t.get(f.MD).call(o.zF.key,e),requestAnimationFrame((()=>{t.get(f.kY).focus()})))}),[])}}($,n,r);return c.qy`
    <host
      class=${(0,s.A)(!(null==t?void 0:t.editable)&&"readonly")}
      ondragstart=${e=>e.preventDefault()}
      ondragover=${e=>e.preventDefault()}
      ondragleave=${e=>e.preventDefault()}
      onpointermove=${_}
      onpointerleave=${C}
    >
      <button
        type="button"
        data-show="false"
        contenteditable="false"
        draggable="true"
        data-role="col-drag-handle"
        class="handle cell-handle"
        ondragstart=${B}
        onclick=${P}
        onpointerdown=${e=>e.stopPropagation()}
        onpointermove=${e=>e.stopPropagation()}
        ref=${h}
      >
        ${null==d?void 0:d.renderButton("col_drag_handle")}
        <div
          data-show="false"
          class="button-group"
          onpointermove=${e=>e.stopPropagation}
        >
          <button type="button" onpointerdown=${M("left")}>
            ${null==d?void 0:d.renderButton("align_col_left")}
          </button>
          <button type="button" onpointerdown=${M("center")}>
            ${null==d?void 0:d.renderButton("align_col_center")}
          </button>
          <button type="button" onpointerdown=${M("right")}>
            ${null==d?void 0:d.renderButton("align_col_right")}
          </button>
          <button type="button" onpointerdown=${L}>
            ${null==d?void 0:d.renderButton("delete_col")}
          </button>
        </div>
      </button>
      <button
        type="button"
        data-show="false"
        contenteditable="false"
        draggable="true"
        data-role="row-drag-handle"
        class="handle cell-handle"
        ondragstart=${H}
        onclick=${D}
        onpointerdown=${e=>e.stopPropagation()}
        onpointermove=${e=>e.stopPropagation()}
        ref=${g}
      >
        ${null==d?void 0:d.renderButton("row_drag_handle")}
        <div
          data-show="false"
          class="button-group"
          onpointermove=${e=>e.stopPropagation}
        >
          <button type="button" onpointerdown=${L}>
            ${null==d?void 0:d.renderButton("delete_row")}
          </button>
        </div>
      </button>
      <div class="table-wrapper" ref=${w}>
        <div
          data-show="false"
          class="drag-preview"
          data-direction="vertical"
          ref=${y}
        >
          <table>
            <tbody></tbody>
          </table>
        </div>
        <div
          data-show="false"
          contenteditable="false"
          data-display-type="tool"
          data-role="x-line-drag-handle"
          class="handle line-handle"
          onpointermove=${e=>e.stopPropagation}
          ref=${v}
        >
          <button type="button" onclick=${q} class="add-button">
            ${null==d?void 0:d.renderButton("add_row")}
          </button>
        </div>
        <div
          data-show="false"
          contenteditable="false"
          data-display-type="tool"
          data-role="y-line-drag-handle"
          class="handle line-handle"
          onpointermove=${e=>e.stopPropagation}
          ref=${b}
        >
          <button type="button" onclick=${A} class="add-button">
            ${null==d?void 0:d.renderButton("add_col")}
          </button>
        </div>
        <table ref=${p} class="children"></table>
      </div>
    </host>
  `};P.props={getPos:Function,view:Object,ctx:Object,node:Object,config:Object};const D=(0,c.c)(P);var L,M,T=e=>{throw TypeError(e)},Y=(e,t,n)=>(((e,t,n)=>{t.has(e)||T("Cannot "+n)})(e,t,"access private method"),n);class E{constructor(e,t,n,r){var o,l,a;this.ctx=e,this.node=t,this.view=n,this.getPos=r,o=this,(l=L).has(o)?T("Cannot add the same private member more than once"):l instanceof WeakSet?l.add(o):l.set(o,a);const i=document.createElement("milkdown-table-block");this.dom=i,i.view=n,i.ctx=e,i.getPos=r,i.node=t,i.config=e.get(_.key);const c=document.createElement("tbody");this.contentDOM=c,c.setAttribute("data-content-dom","true"),c.classList.add("content-dom"),i.appendChild(c)}update(e){return e.type===this.node.type&&((!e.sameMarkup(this.node)||!e.content.eq(this.node.content))&&(this.node=e,this.dom.node=e,!0))}stopEvent(e){if("drop"===e.type||e.type.startsWith("drag"))return!0;if("mousedown"===e.type){if(e.target instanceof HTMLButtonElement)return!0;const t=e.target;if(t instanceof HTMLElement&&(t.closest("th")||t.closest("td"))){const t=e;return Y(this,L,M).call(this,t)}}return!1}ignoreMutation(e){return!this.dom||!this.contentDOM||"selection"!==e.type&&(this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target))}}L=new WeakSet,M=function(e){const t=this.view;if(!t.editable)return!1;const{state:n,dispatch:r}=t,o=t.posAtCoords({left:e.clientX,top:e.clientY});if(!o)return!1;const c=n.doc.resolve(o.inside),s=(0,a.gi)((e=>"table_cell"===e.type.name||"table_header"===e.type.name))(c);if(!s)return!1;if(n.selection instanceof l.U3){const e=(0,a.gi)((e=>"table_cell"===e.type.name||"table_header"===e.type.name))(n.selection.$from);if((null==e?void 0:e.node)===s.node)return!1}const{from:d}=s,u=l.nh.create(n.doc,d+1);return!n.selection.eq(u)&&(n.selection instanceof i.rn?setTimeout((()=>{r(n.tr.setSelection(u).scrollIntoView())}),20):requestAnimationFrame((()=>{r(n.tr.setSelection(u).scrollIntoView())})),!0)},function(e,t){const n=customElements.get(e);null!=n?n!==t&&console.warn(`Custom element ${e} has been defined before.`):customElements.define(e,t)}("milkdown-table-block",D);const W=(0,r.m5)(o._A.node,(e=>(t,n,r)=>new E(e,t,n,r)));y(W,{displayName:"NodeView<table-block>",group:"TableBlock"});const N=[_,W];var K=n(7511);const F=(e,t)=>{e.config((e=>{e.update(_.key,(e=>({...e,renderButton:e=>{var n,r,o,l,a,i,c,s,d,u,f,p,h,g,v,b,w,y;switch(e){case"add_row":return null!=(r=null==(n=null==t?void 0:t.addRowIcon)?void 0:n.call(t))?r:K.B;case"add_col":return null!=(l=null==(o=null==t?void 0:t.addColIcon)?void 0:o.call(t))?l:K.B;case"delete_row":return null!=(i=null==(a=null==t?void 0:t.deleteRowIcon)?void 0:a.call(t))?i:K.r;case"delete_col":return null!=(s=null==(c=null==t?void 0:t.deleteColIcon)?void 0:c.call(t))?s:K.r;case"align_col_left":return null!=(u=null==(d=null==t?void 0:t.alignLeftIcon)?void 0:d.call(t))?u:K.K;case"align_col_center":return null!=(p=null==(f=null==t?void 0:t.alignCenterIcon)?void 0:f.call(t))?p:K.J;case"align_col_right":return null!=(g=null==(h=null==t?void 0:t.alignRightIcon)?void 0:h.call(t))?g:K.I;case"col_drag_handle":return null!=(b=null==(v=null==t?void 0:t.colDragHandleIcon)?void 0:v.call(t))?b:K.H;case"row_drag_handle":return null!=(y=null==(w=null==t?void 0:t.rowDragHandleIcon)?void 0:w.call(t))?y:K.H}}})))})).use(N)}}}]);
//# sourceMappingURL=3079.1cfda9fd.chunk.js.map