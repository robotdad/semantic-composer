{"version":3,"file":"static/js/3079.1cfda9fd.chunk.js","mappings":"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","sources":["../node_modules/lodash.throttle/index.js","../node_modules/@milkdown/components/src/__internal__/meta.ts","../node_modules/@milkdown/components/src/table-block/config.ts","../node_modules/@milkdown/components/src/table-block/view/utils.ts","../node_modules/@milkdown/components/src/table-block/view/drag.ts","../node_modules/@milkdown/components/src/table-block/view/pointer.ts","../node_modules/@milkdown/components/src/table-block/view/component.ts","../node_modules/@milkdown/components/src/table-block/view/operation.ts","../node_modules/@milkdown/components/src/table-block/view/view.ts","../node_modules/@milkdown/components/src/__internal__/helper.ts","../node_modules/@milkdown/components/src/table-block/index.ts","../node_modules/@milkdown/crepe/src/feature/table/index.ts"],"sourcesContent":["/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = throttle;\n","import type { Meta, MilkdownPlugin } from '@milkdown/ctx'\n\nexport function withMeta<T extends MilkdownPlugin>(\n  plugin: T,\n  meta: Partial<Meta> & Pick<Meta, 'displayName'>\n): T {\n  Object.assign(plugin, {\n    meta: {\n      package: '@milkdown/components',\n      ...meta,\n    },\n  })\n\n  return plugin\n}\n","import { $ctx } from '@milkdown/utils'\nimport type { html } from 'atomico'\nimport { withMeta } from '../__internal__/meta'\n\nexport type RenderType =\n  | 'add_row'\n  | 'add_col'\n  | 'delete_row'\n  | 'delete_col'\n  | 'align_col_left'\n  | 'align_col_center'\n  | 'align_col_right'\n  | 'col_drag_handle'\n  | 'row_drag_handle'\n\nexport interface TableBlockConfig {\n  renderButton: (\n    renderType: RenderType\n  ) => HTMLElement | ReturnType<typeof html> | string\n}\n\nconst defaultTableBlockConfig: TableBlockConfig = {\n  renderButton: (renderType) => {\n    switch (renderType) {\n      case 'add_row':\n        return '+'\n      case 'add_col':\n        return '+'\n      case 'delete_row':\n        return '-'\n      case 'delete_col':\n        return '-'\n      case 'align_col_left':\n        return 'left'\n      case 'align_col_center':\n        return 'center'\n      case 'align_col_right':\n        return 'right'\n      case 'col_drag_handle':\n        return '='\n      case 'row_drag_handle':\n        return '='\n    }\n  },\n}\n\nexport const tableBlockConfig = $ctx(\n  { ...defaultTableBlockConfig },\n  'tableBlockConfigCtx'\n)\n\nwithMeta(tableBlockConfig, {\n  displayName: 'Config<table-block>',\n  group: 'TableBlock',\n})\n","import type { Node } from '@milkdown/prose/model'\nimport type { EditorView } from '@milkdown/prose/view'\nimport { findParent } from '@milkdown/prose'\nimport type { Ref } from 'atomico'\nimport { editorViewCtx } from '@milkdown/core'\nimport { CellSelection } from '@milkdown/prose/tables'\nimport { findTable } from '@milkdown/preset-gfm'\nimport { computePosition } from '@floating-ui/dom'\nimport type { Ctx } from '@milkdown/ctx'\nimport type { CellIndex, Refs } from './types'\n\nexport function findNodeIndex(parent: Node, child: Node) {\n  for (let i = 0; i < parent.childCount; i++) {\n    if (parent.child(i) === child) return i\n  }\n  return -1\n}\n\nexport function findPointerIndex(\n  event: PointerEvent,\n  view?: EditorView\n): CellIndex | undefined {\n  if (!view) return\n\n  try {\n    const posAtCoords = view.posAtCoords({\n      left: event.clientX,\n      top: event.clientY,\n    })\n    if (!posAtCoords) return\n    const pos = posAtCoords?.inside\n    if (pos == null || pos < 0) return\n\n    const $pos = view.state.doc.resolve(pos)\n    const node = view.state.doc.nodeAt(pos)\n    if (!node) return\n\n    const cellType = ['table_cell', 'table_header']\n    const rowType = ['table_row', 'table_header_row']\n\n    const cell = cellType.includes(node.type.name)\n      ? node\n      : findParent((node) => cellType.includes(node.type.name))($pos)?.node\n    const row = findParent((node) => rowType.includes(node.type.name))(\n      $pos\n    )?.node\n    const table = findParent((node) => node.type.name === 'table')($pos)?.node\n    if (!cell || !row || !table) return\n\n    const columnIndex = findNodeIndex(row, cell)\n    const rowIndex = findNodeIndex(table, row)\n\n    return [rowIndex, columnIndex]\n  } catch {\n    return undefined\n  }\n}\n\nexport function getRelatedDOM(\n  contentWrapperRef: Ref<HTMLDivElement>,\n  [rowIndex, columnIndex]: CellIndex\n) {\n  const content = contentWrapperRef.current\n  if (!content) return\n  const rows = content.querySelectorAll('tr')\n  const row = rows[rowIndex]\n  if (!row) return\n\n  const firstRow = rows[0]\n  if (!firstRow) return\n\n  const headerCol = firstRow.children[columnIndex]\n  if (!headerCol) return\n\n  const col = row.children[columnIndex]\n  if (!col) return\n\n  return {\n    row,\n    col,\n    headerCol,\n  }\n}\n\nexport function recoveryStateBetweenUpdate(refs: Refs, ctx?: Ctx, node?: Node) {\n  if (!ctx) return\n  if (!node) return\n  const { selection } = ctx.get(editorViewCtx).state\n  if (!(selection instanceof CellSelection)) return\n\n  const { $from } = selection\n  const table = findTable($from)\n  if (!table || table.node !== node) return\n\n  if (selection.isColSelection()) {\n    const { $head } = selection\n    const colIndex = $head.index($head.depth - 1)\n    computeColHandlePositionByIndex({\n      refs,\n      index: [0, colIndex],\n      before: (handleDOM) => {\n        handleDOM\n          .querySelector('.button-group')\n          ?.setAttribute('data-show', 'true')\n      },\n    })\n    return\n  }\n  if (selection.isRowSelection()) {\n    const { $head } = selection\n    const rowNode = findParent(\n      (node) =>\n        node.type.name === 'table_row' || node.type.name === 'table_header_row'\n    )($head)\n    if (!rowNode) return\n    const rowIndex = findNodeIndex(table.node, rowNode.node)\n    computeRowHandlePositionByIndex({\n      refs,\n      index: [rowIndex, 0],\n      before: (handleDOM) => {\n        if (rowIndex > 0)\n          handleDOM\n            .querySelector('.button-group')\n            ?.setAttribute('data-show', 'true')\n      },\n    })\n  }\n}\n\ninterface ComputeHandlePositionByIndexProps {\n  refs: Refs\n  index: CellIndex\n  before?: (handleDOM: HTMLDivElement) => void\n  after?: (handleDOM: HTMLDivElement) => void\n}\n\nexport function computeColHandlePositionByIndex({\n  refs,\n  index,\n  before,\n  after,\n}: ComputeHandlePositionByIndexProps) {\n  const { contentWrapperRef, colHandleRef, hoverIndex } = refs\n  const colHandle = colHandleRef.current\n  if (!colHandle) return\n\n  hoverIndex.current = index\n  const dom = getRelatedDOM(contentWrapperRef, index)\n  if (!dom) return\n  const { headerCol: col } = dom\n  colHandle.dataset.show = 'true'\n  if (before) before(colHandle)\n  computePosition(col, colHandle, { placement: 'top' }).then(({ x, y }) => {\n    Object.assign(colHandle.style, {\n      left: `${x}px`,\n      top: `${y}px`,\n    })\n    if (after) after(colHandle)\n  })\n}\n\nexport function computeRowHandlePositionByIndex({\n  refs,\n  index,\n  before,\n  after,\n}: ComputeHandlePositionByIndexProps) {\n  const { contentWrapperRef, rowHandleRef, hoverIndex } = refs\n  const rowHandle = rowHandleRef.current\n  if (!rowHandle) return\n\n  hoverIndex.current = index\n  const dom = getRelatedDOM(contentWrapperRef, index)\n  if (!dom) return\n  const { row } = dom\n  rowHandle.dataset.show = 'true'\n  if (before) before(rowHandle)\n  computePosition(row, rowHandle, { placement: 'left' }).then(({ x, y }) => {\n    Object.assign(rowHandle.style, {\n      left: `${x}px`,\n      top: `${y}px`,\n    })\n    if (after) after(rowHandle)\n  })\n}\n","import throttle from 'lodash.throttle'\nimport { computePosition, offset } from '@floating-ui/dom'\nimport { useEffect, useHost, useMemo } from 'atomico'\nimport { commandsCtx, editorViewCtx } from '@milkdown/core'\nimport {\n  moveColCommand,\n  moveRowCommand,\n  selectColCommand,\n  selectRowCommand,\n} from '@milkdown/preset-gfm'\nimport type { Ctx } from '@milkdown/ctx'\nimport {\n  computeColHandlePositionByIndex,\n  computeRowHandlePositionByIndex,\n  getRelatedDOM,\n} from './utils'\nimport type { CellIndex, DragContext, Refs } from './types'\n\nfunction prepareDndContext(refs: Refs): DragContext | undefined {\n  const {\n    dragPreviewRef,\n    tableWrapperRef,\n    contentWrapperRef,\n    yLineHandleRef,\n    xLineHandleRef,\n    colHandleRef,\n    rowHandleRef,\n  } = refs\n\n  const preview = dragPreviewRef.current\n  if (!preview) return\n  const wrapper = tableWrapperRef.current\n  if (!wrapper) return\n  const content = contentWrapperRef.current\n  if (!content) return\n  const contentRoot = content.querySelector('tbody')\n  if (!contentRoot) return\n  const previewRoot = preview.querySelector('tbody')\n  if (!previewRoot) return\n  const yHandle = yLineHandleRef.current\n  if (!yHandle) return\n  const xHandle = xLineHandleRef.current\n  if (!xHandle) return\n  const colHandle = colHandleRef.current\n  if (!colHandle) return\n  const rowHandle = rowHandleRef.current\n  if (!rowHandle) return\n\n  const context = {\n    preview,\n    wrapper,\n    content,\n    contentRoot,\n    previewRoot,\n    yHandle,\n    xHandle,\n    colHandle,\n    rowHandle,\n  }\n\n  return context\n}\n\nfunction handleDrag(\n  refs: Refs,\n  event: DragEvent,\n  ctx: Ctx | undefined,\n  fn: (context: DragContext) => void\n) {\n  const view = ctx?.get(editorViewCtx)\n  if (!view?.editable) return\n\n  event.stopPropagation()\n  if (event.dataTransfer) event.dataTransfer.effectAllowed = 'move'\n\n  const context = prepareDndContext(refs)\n\n  if (!context) return\n\n  // This is to avoid a chrome bug:\n  // https://stackoverflow.com/questions/14203734/dragend-dragenter-and-dragleave-firing-off-immediately-when-i-drag\n  requestAnimationFrame(() => {\n    fn(context)\n  })\n}\n\nexport function createDragRowHandler(refs: Refs, ctx?: Ctx) {\n  return (event: DragEvent) => {\n    handleDrag(\n      refs,\n      event,\n      ctx,\n      ({\n        preview,\n        content,\n        previewRoot,\n        yHandle,\n        xHandle,\n        colHandle,\n        rowHandle,\n      }) => {\n        const { hoverIndex, dragInfo } = refs\n        xHandle.dataset.displayType = 'indicator'\n        yHandle.dataset.show = 'false'\n        colHandle.dataset.show = 'false'\n        rowHandle\n          .querySelector('.button-group')\n          ?.setAttribute('data-show', 'false')\n\n        const [rowIndex] = hoverIndex.current!\n\n        dragInfo.current = {\n          startCoords: [event.clientX, event.clientY],\n          startIndex: rowIndex,\n          endIndex: rowIndex,\n          type: 'row',\n        }\n        preview.dataset.direction = 'vertical'\n\n        const rows = content.querySelectorAll('tr')\n        while (previewRoot.firstChild)\n          previewRoot.removeChild(previewRoot.firstChild)\n\n        const row = rows[rowIndex]\n        if (!row) return\n\n        previewRoot.appendChild(row.cloneNode(true))\n        const height = row.getBoundingClientRect().height\n\n        const { width } = content\n          .querySelector('tbody')!\n          .getBoundingClientRect()\n        Object.assign(preview.style, {\n          width: `${width}px`,\n          height: `${height}px`,\n        })\n\n        preview.dataset.show = 'true'\n      }\n    )\n  }\n}\n\nexport function createDragColHandler(refs: Refs, ctx?: Ctx) {\n  return (event: DragEvent) => {\n    handleDrag(\n      refs,\n      event,\n      ctx,\n      ({\n        preview,\n        content,\n        previewRoot,\n        yHandle,\n        xHandle,\n        colHandle,\n        rowHandle,\n      }) => {\n        const { hoverIndex, dragInfo } = refs\n        xHandle.dataset.show = 'false'\n        yHandle.dataset.displayType = 'indicator'\n        rowHandle.dataset.show = 'false'\n        colHandle\n          .querySelector('.button-group')\n          ?.setAttribute('data-show', 'false')\n\n        const [_, colIndex] = hoverIndex.current!\n\n        dragInfo.current = {\n          startCoords: [event.clientX, event.clientY],\n          startIndex: colIndex,\n          endIndex: colIndex,\n          type: 'col',\n        }\n        preview.dataset.direction = 'horizontal'\n\n        const rows = content.querySelectorAll('tr')\n        while (previewRoot.firstChild)\n          previewRoot.removeChild(previewRoot.firstChild)\n\n        let width: number | undefined\n\n        Array.from(rows).forEach((row) => {\n          const col = row.children[colIndex]\n          if (!col) return\n\n          if (width === undefined) width = col.getBoundingClientRect().width\n\n          const tr = col.parentElement!.cloneNode(false)\n          const clone = col.cloneNode(true)\n          tr.appendChild(clone)\n          previewRoot.appendChild(tr)\n        })\n\n        const { height } = content\n          .querySelector('tbody')!\n          .getBoundingClientRect()\n        Object.assign(preview.style, {\n          width: `${width}px`,\n          height: `${height}px`,\n        })\n\n        preview.dataset.show = 'true'\n      }\n    )\n  }\n}\n\nexport function createDragOverHandler(refs: Refs): (e: DragEvent) => void {\n  return throttle((e: DragEvent) => {\n    const context = prepareDndContext(refs)\n    if (!context) return\n    const { preview, content, contentRoot, xHandle, yHandle } = context\n    const { dragInfo, hoverIndex } = refs\n\n    if (preview.dataset.show === 'false') return\n    const dom = getRelatedDOM(refs.contentWrapperRef, hoverIndex.current!)\n    if (!dom) return\n    const firstRow = contentRoot.querySelector('tr')\n    if (!firstRow) return\n    const info = dragInfo.current\n    if (!info) return\n\n    if (!contentRoot.offsetParent) return\n\n    const wrapperOffsetTop = (contentRoot.offsetParent as HTMLElement).offsetTop\n    const wrapperOffsetLeft = (contentRoot.offsetParent as HTMLElement)\n      .offsetLeft\n\n    if (info.type === 'col') {\n      const width = dom.col.getBoundingClientRect().width\n      const { left, width: fullWidth } = contentRoot.getBoundingClientRect()\n      const leftGap = wrapperOffsetLeft - left\n      const previewLeft = e.clientX + leftGap - width / 2\n      const previewRight = e.clientX + leftGap + width / 2\n\n      const [startX] = info.startCoords\n      const direction = startX < e.clientX ? 'right' : 'left'\n\n      preview.style.top = `${wrapperOffsetTop}px`\n      const previewLeftOffset =\n        previewLeft < left + leftGap - 20\n          ? left + leftGap - 20\n          : previewLeft > left + fullWidth + leftGap - width + 20\n            ? left + fullWidth + leftGap - width + 20\n            : previewLeft\n\n      preview.style.left = `${previewLeftOffset}px`\n\n      const children = Array.from(firstRow.children)\n      const col = children.find((col, index) => {\n        const boundary = col.getBoundingClientRect()\n        let boundaryLeft = boundary.left + wrapperOffsetLeft - left\n        let boundaryRight = boundary.right + wrapperOffsetLeft - left\n        if (direction === 'right') {\n          boundaryLeft = boundaryLeft + boundary.width / 2\n          boundaryRight = boundaryRight + boundary.width / 2\n          if (boundaryLeft <= previewRight && boundaryRight >= previewRight)\n            return true\n          if (\n            index === firstRow.children.length - 1 &&\n            previewRight > boundaryRight\n          )\n            return true\n        } else {\n          boundaryLeft = boundaryLeft - boundary.width / 2\n          boundaryRight = boundaryRight - boundary.width / 2\n          if (boundaryLeft <= previewLeft && boundaryRight >= previewLeft)\n            return true\n          if (index === 0 && previewLeft < boundaryLeft) return true\n        }\n\n        return false\n      })\n      if (col) {\n        const yHandleWidth = yHandle.getBoundingClientRect().width\n        const contentBoundary = content.getBoundingClientRect()\n        const index = children.indexOf(col)\n        info.endIndex = index\n\n        computePosition(col, yHandle, {\n          placement: direction === 'left' ? 'left' : 'right',\n          middleware: [offset(direction === 'left' ? -1 * yHandleWidth : 0)],\n        }).then(({ x }) => {\n          yHandle.dataset.show = 'true'\n          Object.assign(yHandle.style, {\n            height: `${contentBoundary.height}px`,\n            left: `${x}px`,\n            top: `${wrapperOffsetTop}px`,\n          })\n        })\n      }\n    } else if (info.type === 'row') {\n      const height = dom.row.getBoundingClientRect().height\n      const { top, height: fullHeight } = contentRoot.getBoundingClientRect()\n\n      const topGap = wrapperOffsetTop - top\n      const previewTop = e.clientY + topGap - height / 2\n      const previewBottom = e.clientY + topGap + height / 2\n\n      const [_, startY] = info.startCoords\n      const direction = startY < e.clientY ? 'down' : 'up'\n\n      const previewTopOffset =\n        previewTop < top + topGap - 20\n          ? top + topGap - 20\n          : previewTop > top + fullHeight + topGap - height + 20\n            ? top + fullHeight + topGap - height + 20\n            : previewTop\n\n      preview.style.top = `${previewTopOffset}px`\n      preview.style.left = `${wrapperOffsetLeft}px`\n\n      const rows = Array.from(contentRoot.querySelectorAll('tr'))\n      const row = rows.find((row, index) => {\n        const boundary = row.getBoundingClientRect()\n        let boundaryTop = boundary.top + wrapperOffsetTop - top\n        let boundaryBottom = boundary.bottom + wrapperOffsetTop - top\n        if (direction === 'down') {\n          boundaryTop = boundaryTop + boundary.height / 2\n          boundaryBottom = boundaryBottom + boundary.height / 2\n          if (boundaryTop <= previewBottom && boundaryBottom >= previewBottom)\n            return true\n          if (index === rows.length - 1 && previewBottom > boundaryBottom)\n            return true\n        } else {\n          boundaryTop = boundaryTop - boundary.height / 2\n          boundaryBottom = boundaryBottom - boundary.height / 2\n          if (boundaryTop <= previewTop && boundaryBottom >= previewTop)\n            return true\n          if (index === 0 && previewTop < boundaryTop) return true\n        }\n        return false\n      })\n      if (row) {\n        const xHandleHeight = xHandle.getBoundingClientRect().height\n        const contentBoundary = content.getBoundingClientRect()\n        const index = rows.indexOf(row)\n        info.endIndex = index\n\n        computePosition(row, xHandle, {\n          placement: direction === 'up' ? 'top' : 'bottom',\n          middleware: [offset(direction === 'up' ? -1 * xHandleHeight : 0)],\n        }).then(({ y }) => {\n          xHandle.dataset.show = 'true'\n          Object.assign(xHandle.style, {\n            width: `${contentBoundary.width}px`,\n            top: `${y}px`,\n          })\n        })\n      }\n    }\n  }, 20)\n}\n\nexport function useDragHandlers(\n  refs: Refs,\n  ctx?: Ctx,\n  getPos?: () => number | undefined\n) {\n  const { dragPreviewRef, yLineHandleRef, xLineHandleRef, dragInfo } = refs\n  const host = useHost()\n  const root = useMemo(() => host.current.getRootNode() as HTMLElement, [host])\n\n  const dragRow = useMemo(() => createDragRowHandler(refs, ctx), [refs])\n  const dragCol = useMemo(() => createDragColHandler(refs, ctx), [refs])\n\n  useEffect(() => {\n    const onDragEnd = () => {\n      const preview = dragPreviewRef.current\n      if (!preview) return\n\n      if (preview.dataset.show === 'false') return\n\n      const previewRoot = preview?.querySelector('tbody')\n\n      while (previewRoot?.firstChild)\n        previewRoot?.removeChild(previewRoot.firstChild)\n\n      if (preview) preview.dataset.show = 'false'\n    }\n\n    const onDrop = () => {\n      const preview = dragPreviewRef.current\n      if (!preview) return\n      const yHandle = yLineHandleRef.current\n      if (!yHandle) return\n      const xHandle = xLineHandleRef.current\n      if (!xHandle) return\n      const info = dragInfo.current\n      if (!info) return\n      if (!ctx) return\n      if (preview.dataset.show === 'false') return\n      const colHandle = refs.colHandleRef.current\n      if (!colHandle) return\n      const rowHandle = refs.rowHandleRef.current\n      if (!rowHandle) return\n\n      yHandle.dataset.show = 'false'\n      xHandle.dataset.show = 'false'\n\n      if (info.startIndex === info.endIndex) return\n\n      const commands = ctx.get(commandsCtx)\n      const payload = {\n        from: info.startIndex,\n        to: info.endIndex,\n        pos: (getPos?.() ?? 0) + 1,\n      }\n      if (info.type === 'col') {\n        commands.call(selectColCommand.key, {\n          pos: payload.pos,\n          index: info.startIndex,\n        })\n        commands.call(moveColCommand.key, payload)\n        const index: CellIndex = [0, info.endIndex]\n        computeColHandlePositionByIndex({\n          refs,\n          index,\n        })\n      } else {\n        commands.call(selectRowCommand.key, {\n          pos: payload.pos,\n          index: info.startIndex,\n        })\n        commands.call(moveRowCommand.key, payload)\n        const index: CellIndex = [info.endIndex, 0]\n        computeRowHandlePositionByIndex({\n          refs,\n          index,\n        })\n      }\n\n      requestAnimationFrame(() => {\n        ctx.get(editorViewCtx).focus()\n      })\n    }\n    const onDragOver = createDragOverHandler(refs)\n\n    root.addEventListener('dragover', onDragOver)\n    root.addEventListener('dragend', onDragEnd)\n    root.addEventListener('drop', onDrop)\n    return () => {\n      root.removeEventListener('dragover', onDragOver)\n      root.removeEventListener('dragend', onDragEnd)\n      root.removeEventListener('drop', onDrop)\n    }\n  }, [])\n\n  return {\n    dragRow,\n    dragCol,\n  }\n}\n","import { computePosition, offset } from '@floating-ui/dom'\nimport type { EditorView } from '@milkdown/prose/view'\nimport throttle from 'lodash.throttle'\nimport { useMemo } from 'atomico'\nimport type { Refs } from './types'\nimport {\n  computeColHandlePositionByIndex,\n  computeRowHandlePositionByIndex,\n  findPointerIndex,\n  getRelatedDOM,\n} from './utils'\n\nexport function createPointerMoveHandler(\n  refs: Refs,\n  view?: EditorView\n): (e: PointerEvent) => void {\n  return throttle((e: PointerEvent) => {\n    if (!view?.editable) return\n    const {\n      contentWrapperRef,\n      yLineHandleRef,\n      xLineHandleRef,\n      colHandleRef,\n      rowHandleRef,\n      hoverIndex,\n      lineHoverIndex,\n    } = refs\n    const yHandle = yLineHandleRef.current\n    if (!yHandle) return\n    const xHandle = xLineHandleRef.current\n    if (!xHandle) return\n    const content = contentWrapperRef.current\n    if (!content) return\n    const rowHandle = rowHandleRef.current\n    if (!rowHandle) return\n    const colHandle = colHandleRef.current\n    if (!colHandle) return\n\n    const index = findPointerIndex(e, view)\n    if (!index) return\n\n    const dom = getRelatedDOM(contentWrapperRef, index)\n    if (!dom) return\n\n    const [rowIndex, colIndex] = index\n    const boundary = dom.col.getBoundingClientRect()\n    const closeToBoundaryLeft = Math.abs(e.clientX - boundary.left) < 8\n    const closeToBoundaryRight = Math.abs(boundary.right - e.clientX) < 8\n    const closeToBoundaryTop = Math.abs(e.clientY - boundary.top) < 8\n    const closeToBoundaryBottom = Math.abs(boundary.bottom - e.clientY) < 8\n\n    const closeToBoundary =\n      closeToBoundaryLeft ||\n      closeToBoundaryRight ||\n      closeToBoundaryTop ||\n      closeToBoundaryBottom\n\n    const rowButtonGroup = rowHandle.querySelector<HTMLElement>('.button-group')\n    const colButtonGroup = colHandle.querySelector<HTMLElement>('.button-group')\n    if (rowButtonGroup) rowButtonGroup.dataset.show = 'false'\n    if (colButtonGroup) colButtonGroup.dataset.show = 'false'\n\n    if (closeToBoundary) {\n      const contentBoundary = content.getBoundingClientRect()\n      rowHandle.dataset.show = 'false'\n      colHandle.dataset.show = 'false'\n      xHandle.dataset.displayType = 'tool'\n      yHandle.dataset.displayType = 'tool'\n\n      const yHandleWidth = yHandle.getBoundingClientRect().width\n      const xHandleHeight = xHandle.getBoundingClientRect().height\n\n      // display vertical line handle\n      if (closeToBoundaryLeft || closeToBoundaryRight) {\n        lineHoverIndex.current![1] = closeToBoundaryLeft\n          ? colIndex\n          : colIndex + 1\n        computePosition(dom.col, yHandle, {\n          placement: closeToBoundaryLeft ? 'left' : 'right',\n          middleware: [offset(closeToBoundaryLeft ? -1 * yHandleWidth : 0)],\n        }).then(({ x }) => {\n          yHandle.dataset.show = 'true'\n          Object.assign(yHandle.style, {\n            height: `${contentBoundary.height}px`,\n            left: `${x}px`,\n          })\n        })\n      } else {\n        yHandle.dataset.show = 'false'\n      }\n\n      // display horizontal line handle\n      // won't display if the row is the header row\n      if (index[0] !== 0 && (closeToBoundaryTop || closeToBoundaryBottom)) {\n        lineHoverIndex.current![0] = closeToBoundaryTop\n          ? rowIndex\n          : rowIndex + 1\n        computePosition(dom.row, xHandle, {\n          placement: closeToBoundaryTop ? 'top' : 'bottom',\n          middleware: [offset(closeToBoundaryTop ? -1 * xHandleHeight : 0)],\n        }).then(({ y }) => {\n          xHandle.dataset.show = 'true'\n          Object.assign(xHandle.style, {\n            width: `${contentBoundary.width}px`,\n            top: `${y}px`,\n          })\n        })\n      } else {\n        xHandle.dataset.show = 'false'\n      }\n\n      return\n    }\n\n    lineHoverIndex.current = [-1, -1]\n\n    yHandle.dataset.show = 'false'\n    xHandle.dataset.show = 'false'\n    rowHandle.dataset.show = 'true'\n    colHandle.dataset.show = 'true'\n\n    computeRowHandlePositionByIndex({\n      refs,\n      index,\n    })\n    computeColHandlePositionByIndex({\n      refs,\n      index,\n    })\n    hoverIndex.current = index\n  }, 20)\n}\n\nexport function createPointerLeaveHandler(refs: Refs): () => void {\n  return () => {\n    const { rowHandleRef, colHandleRef, yLineHandleRef, xLineHandleRef } = refs\n    setTimeout(() => {\n      const rowHandle = rowHandleRef.current\n      if (!rowHandle) return\n      const colHandle = colHandleRef.current\n      if (!colHandle) return\n      const yHandle = yLineHandleRef.current\n      if (!yHandle) return\n      const xHandle = xLineHandleRef.current\n      if (!xHandle) return\n\n      rowHandle.dataset.show = 'false'\n      colHandle.dataset.show = 'false'\n      yHandle.dataset.show = 'false'\n      xHandle.dataset.show = 'false'\n    }, 200)\n  }\n}\n\nexport function usePointerHandlers(refs: Refs, view?: EditorView) {\n  const pointerMove = useMemo(() => createPointerMoveHandler(refs, view), [])\n  const pointerLeave = useMemo(() => createPointerLeaveHandler(refs), [])\n\n  return {\n    pointerMove,\n    pointerLeave,\n  }\n}\n","import type { Component } from 'atomico'\nimport { c, html, useHost, useLayoutEffect, useMemo, useRef } from 'atomico'\nimport type { Node } from '@milkdown/prose/model'\nimport type { EditorView } from '@milkdown/prose/view'\nimport type { Ctx } from '@milkdown/ctx'\n\nimport clsx from 'clsx'\nimport type { TableBlockConfig } from '../config'\nimport { useDragHandlers } from './drag'\nimport type { CellIndex, DragInfo, Refs } from './types'\nimport { recoveryStateBetweenUpdate } from './utils'\nimport { usePointerHandlers } from './pointer'\nimport { useOperation } from './operation'\n\nexport interface TableComponentProps {\n  view: EditorView\n  ctx: Ctx\n  getPos: () => number | undefined\n  node: Node\n  config: TableBlockConfig\n}\n\nexport const tableComponent: Component<TableComponentProps> = ({\n  view,\n  ctx,\n  getPos,\n  node,\n  config,\n}) => {\n  const host = useHost()\n  const contentWrapperRef = useRef<HTMLDivElement>()\n  const colHandleRef = useRef<HTMLDivElement>()\n  const rowHandleRef = useRef<HTMLDivElement>()\n  const xLineHandleRef = useRef<HTMLDivElement>()\n  const yLineHandleRef = useRef<HTMLDivElement>()\n  const tableWrapperRef = useRef<HTMLDivElement>()\n  const dragPreviewRef = useRef<HTMLDivElement>()\n  const hoverIndex = useRef<CellIndex>([0, 0])\n  const lineHoverIndex = useRef<CellIndex>([-1, -1])\n  const dragInfo = useRef<DragInfo>()\n  const refs: Refs = useMemo(() => {\n    return {\n      dragPreviewRef,\n      tableWrapperRef,\n      contentWrapperRef,\n      yLineHandleRef,\n      xLineHandleRef,\n      colHandleRef,\n      rowHandleRef,\n      hoverIndex,\n      lineHoverIndex,\n      dragInfo,\n    }\n  }, [])\n\n  useLayoutEffect(() => {\n    const current = contentWrapperRef.current\n    if (!current) return\n\n    const contentDOM = host.current.querySelector('[data-content-dom]')\n\n    if (contentDOM) current.appendChild(contentDOM)\n\n    if (view?.editable) recoveryStateBetweenUpdate(refs, ctx, node)\n  }, [])\n\n  const { pointerLeave, pointerMove } = usePointerHandlers(refs, view)\n  const { dragRow, dragCol } = useDragHandlers(refs, ctx, getPos)\n  const { onAddRow, onAddCol, selectCol, selectRow, deleteSelected, onAlign } =\n    useOperation(refs, ctx, getPos)\n\n  return html`\n    <host\n      class=${clsx(!view?.editable && 'readonly')}\n      ondragstart=${(e: DragEvent) => e.preventDefault()}\n      ondragover=${(e: DragEvent) => e.preventDefault()}\n      ondragleave=${(e: DragEvent) => e.preventDefault()}\n      onpointermove=${pointerMove}\n      onpointerleave=${pointerLeave}\n    >\n      <button\n        type=\"button\"\n        data-show=\"false\"\n        contenteditable=\"false\"\n        draggable=\"true\"\n        data-role=\"col-drag-handle\"\n        class=\"handle cell-handle\"\n        ondragstart=${dragCol}\n        onclick=${selectCol}\n        onpointerdown=${(e: PointerEvent) => e.stopPropagation()}\n        onpointermove=${(e: PointerEvent) => e.stopPropagation()}\n        ref=${colHandleRef}\n      >\n        ${config?.renderButton('col_drag_handle')}\n        <div\n          data-show=\"false\"\n          class=\"button-group\"\n          onpointermove=${(e: PointerEvent) => e.stopPropagation}\n        >\n          <button type=\"button\" onpointerdown=${onAlign('left')}>\n            ${config?.renderButton('align_col_left')}\n          </button>\n          <button type=\"button\" onpointerdown=${onAlign('center')}>\n            ${config?.renderButton('align_col_center')}\n          </button>\n          <button type=\"button\" onpointerdown=${onAlign('right')}>\n            ${config?.renderButton('align_col_right')}\n          </button>\n          <button type=\"button\" onpointerdown=${deleteSelected}>\n            ${config?.renderButton('delete_col')}\n          </button>\n        </div>\n      </button>\n      <button\n        type=\"button\"\n        data-show=\"false\"\n        contenteditable=\"false\"\n        draggable=\"true\"\n        data-role=\"row-drag-handle\"\n        class=\"handle cell-handle\"\n        ondragstart=${dragRow}\n        onclick=${selectRow}\n        onpointerdown=${(e: PointerEvent) => e.stopPropagation()}\n        onpointermove=${(e: PointerEvent) => e.stopPropagation()}\n        ref=${rowHandleRef}\n      >\n        ${config?.renderButton('row_drag_handle')}\n        <div\n          data-show=\"false\"\n          class=\"button-group\"\n          onpointermove=${(e: PointerEvent) => e.stopPropagation}\n        >\n          <button type=\"button\" onpointerdown=${deleteSelected}>\n            ${config?.renderButton('delete_row')}\n          </button>\n        </div>\n      </button>\n      <div class=\"table-wrapper\" ref=${tableWrapperRef}>\n        <div\n          data-show=\"false\"\n          class=\"drag-preview\"\n          data-direction=\"vertical\"\n          ref=${dragPreviewRef}\n        >\n          <table>\n            <tbody></tbody>\n          </table>\n        </div>\n        <div\n          data-show=\"false\"\n          contenteditable=\"false\"\n          data-display-type=\"tool\"\n          data-role=\"x-line-drag-handle\"\n          class=\"handle line-handle\"\n          onpointermove=${(e: PointerEvent) => e.stopPropagation}\n          ref=${xLineHandleRef}\n        >\n          <button type=\"button\" onclick=${onAddRow} class=\"add-button\">\n            ${config?.renderButton('add_row')}\n          </button>\n        </div>\n        <div\n          data-show=\"false\"\n          contenteditable=\"false\"\n          data-display-type=\"tool\"\n          data-role=\"y-line-drag-handle\"\n          class=\"handle line-handle\"\n          onpointermove=${(e: PointerEvent) => e.stopPropagation}\n          ref=${yLineHandleRef}\n        >\n          <button type=\"button\" onclick=${onAddCol} class=\"add-button\">\n            ${config?.renderButton('add_col')}\n          </button>\n        </div>\n        <table ref=${contentWrapperRef} class=\"children\"></table>\n      </div>\n    </host>\n  `\n}\n\ntableComponent.props = {\n  getPos: Function,\n  view: Object,\n  ctx: Object,\n  node: Object,\n  config: Object,\n}\n\nexport const TableElement = c(tableComponent)\n","import { useCallback } from 'atomico'\nimport { commandsCtx, editorViewCtx } from '@milkdown/core'\nimport {\n  addColAfterCommand,\n  addColBeforeCommand,\n  addRowAfterCommand,\n  addRowBeforeCommand,\n  deleteSelectedCellsCommand,\n  selectColCommand,\n  selectRowCommand,\n  setAlignCommand,\n} from '@milkdown/preset-gfm'\nimport type { Ctx } from '@milkdown/ctx'\nimport type { Refs } from './types'\n\nexport function useOperation(\n  refs: Refs,\n  ctx?: Ctx,\n  getPos?: () => number | undefined\n) {\n  const {\n    xLineHandleRef,\n    contentWrapperRef,\n    colHandleRef,\n    rowHandleRef,\n    hoverIndex,\n    lineHoverIndex,\n  } = refs\n\n  const onAddRow = useCallback(() => {\n    if (!ctx) return\n    const xHandle = xLineHandleRef.current\n    if (!xHandle) return\n\n    const [rowIndex] = lineHoverIndex.current!\n    if (rowIndex < 0) return\n\n    if (!ctx.get(editorViewCtx).editable) return\n\n    const rows = Array.from(\n      contentWrapperRef.current?.querySelectorAll('tr') ?? []\n    )\n    const commands = ctx.get(commandsCtx)\n    const pos = (getPos?.() ?? 0) + 1\n    if (rows.length === rowIndex) {\n      commands.call(selectRowCommand.key, { pos, index: rowIndex - 1 })\n      commands.call(addRowAfterCommand.key)\n    } else {\n      commands.call(selectRowCommand.key, { pos, index: rowIndex })\n      commands.call(addRowBeforeCommand.key)\n    }\n\n    commands.call(selectRowCommand.key, { pos, index: rowIndex })\n    xHandle.dataset.show = 'false'\n  }, [])\n\n  const onAddCol = useCallback(() => {\n    if (!ctx) return\n    const xHandle = xLineHandleRef.current\n    if (!xHandle) return\n\n    const [_, colIndex] = lineHoverIndex.current!\n    if (colIndex < 0) return\n\n    if (!ctx.get(editorViewCtx).editable) return\n\n    const cols = Array.from(\n      contentWrapperRef.current?.querySelector('tr')?.children ?? []\n    )\n    const commands = ctx.get(commandsCtx)\n\n    const pos = (getPos?.() ?? 0) + 1\n    if (cols.length === colIndex) {\n      commands.call(selectColCommand.key, { pos, index: colIndex - 1 })\n      commands.call(addColAfterCommand.key)\n    } else {\n      commands.call(selectColCommand.key, { pos, index: colIndex })\n      commands.call(addColBeforeCommand.key)\n    }\n\n    commands.call(selectColCommand.key, { pos, index: colIndex })\n  }, [])\n\n  const selectCol = useCallback(() => {\n    if (!ctx) return\n    const [_, colIndex] = hoverIndex.current!\n    const commands = ctx.get(commandsCtx)\n    const pos = (getPos?.() ?? 0) + 1\n    commands.call(selectColCommand.key, { pos, index: colIndex })\n    const buttonGroup =\n      colHandleRef.current?.querySelector<HTMLElement>('.button-group')\n    if (buttonGroup)\n      buttonGroup.dataset.show =\n        buttonGroup.dataset.show === 'true' ? 'false' : 'true'\n  }, [])\n\n  const selectRow = useCallback(() => {\n    if (!ctx) return\n    const [rowIndex, _] = hoverIndex.current!\n    const commands = ctx.get(commandsCtx)\n    const pos = (getPos?.() ?? 0) + 1\n    commands.call(selectRowCommand.key, { pos, index: rowIndex })\n    const buttonGroup =\n      rowHandleRef.current?.querySelector<HTMLElement>('.button-group')\n    if (buttonGroup && rowIndex > 0)\n      buttonGroup.dataset.show =\n        buttonGroup.dataset.show === 'true' ? 'false' : 'true'\n  }, [])\n\n  const deleteSelected = useCallback((e: PointerEvent) => {\n    if (!ctx) return\n\n    if (!ctx.get(editorViewCtx).editable) return\n\n    e.preventDefault()\n    e.stopPropagation()\n    const commands = ctx.get(commandsCtx)\n    commands.call(deleteSelectedCellsCommand.key)\n    requestAnimationFrame(() => {\n      ctx.get(editorViewCtx).focus()\n    })\n  }, [])\n\n  const onAlign = useCallback(\n    (direction: 'left' | 'center' | 'right') => (e: PointerEvent) => {\n      if (!ctx) return\n\n      if (!ctx.get(editorViewCtx).editable) return\n\n      e.preventDefault()\n      e.stopPropagation()\n      const commands = ctx.get(commandsCtx)\n      commands.call(setAlignCommand.key, direction)\n      requestAnimationFrame(() => {\n        ctx.get(editorViewCtx).focus()\n      })\n    },\n    []\n  )\n\n  return {\n    onAddRow,\n    onAddCol,\n    selectCol,\n    selectRow,\n    deleteSelected,\n    onAlign,\n  }\n}\n","import { $view } from '@milkdown/utils'\nimport { tableSchema } from '@milkdown/preset-gfm'\nimport type { Node } from '@milkdown/prose/model'\nimport type {\n  EditorView,\n  NodeView,\n  NodeViewConstructor,\n  ViewMutationRecord,\n} from '@milkdown/prose/view'\nimport type { Ctx } from '@milkdown/ctx'\nimport { NodeSelection, TextSelection } from '@milkdown/prose/state'\nimport { findParent } from '@milkdown/prose'\nimport { CellSelection } from '@milkdown/prose/tables'\nimport { defIfNotExists } from '../../__internal__/helper'\nimport { tableBlockConfig } from '../config'\nimport { withMeta } from '../../__internal__/meta'\nimport type { TableComponentProps } from './component'\nimport { TableElement } from './component'\n\nexport class TableNodeView implements NodeView {\n  dom: HTMLElement & TableComponentProps\n  contentDOM: HTMLElement\n  constructor(\n    public ctx: Ctx,\n    public node: Node,\n    public view: EditorView,\n    public getPos: () => number | undefined\n  ) {\n    const dom = document.createElement('milkdown-table-block') as HTMLElement &\n      TableComponentProps\n    this.dom = dom\n    dom.view = view\n    dom.ctx = ctx\n    dom.getPos = getPos\n    dom.node = node\n    dom.config = ctx.get(tableBlockConfig.key)\n\n    const contentDOM = document.createElement('tbody')\n    this.contentDOM = contentDOM\n    contentDOM.setAttribute('data-content-dom', 'true')\n    contentDOM.classList.add('content-dom')\n\n    dom.appendChild(contentDOM)\n  }\n\n  update(node: Node) {\n    if (node.type !== this.node.type) return false\n\n    if (node.sameMarkup(this.node) && node.content.eq(this.node.content))\n      return false\n\n    this.node = node\n    this.dom.node = node\n\n    return true\n  }\n\n  #handleClick(event: PointerEvent) {\n    const view = this.view\n    if (!view.editable) return false\n\n    const { state, dispatch } = view\n    const pos = view.posAtCoords({ left: event.clientX, top: event.clientY })\n\n    if (!pos) return false\n\n    const $pos = state.doc.resolve(pos.inside)\n    const node = findParent(\n      (node) =>\n        node.type.name === 'table_cell' || node.type.name === 'table_header'\n    )($pos)\n\n    if (!node) return false\n\n    // if the selection is a text selection, and the current node is the same as the node, return false\n    if (state.selection instanceof TextSelection) {\n      const currentNode = findParent(\n        (node) =>\n          node.type.name === 'table_cell' || node.type.name === 'table_header'\n      )(state.selection.$from)\n      if (currentNode?.node === node.node) return false\n    }\n\n    const { from } = node\n\n    const selection = NodeSelection.create(state.doc, from + 1)\n    if (state.selection.eq(selection)) return false\n\n    if (state.selection instanceof CellSelection) {\n      setTimeout(() => {\n        dispatch(state.tr.setSelection(selection).scrollIntoView())\n      }, 20)\n    } else {\n      requestAnimationFrame(() => {\n        dispatch(state.tr.setSelection(selection).scrollIntoView())\n      })\n    }\n    return true\n  }\n\n  stopEvent(e: Event) {\n    if (e.type === 'drop' || e.type.startsWith('drag')) return true\n\n    if (e.type === 'mousedown') {\n      if (e.target instanceof HTMLButtonElement) return true\n\n      const target = e.target\n      if (\n        target instanceof HTMLElement &&\n        (target.closest('th') || target.closest('td'))\n      ) {\n        const event = e as PointerEvent\n        return this.#handleClick(event)\n      }\n    }\n\n    return false\n  }\n\n  ignoreMutation(mutation: ViewMutationRecord) {\n    if (!this.dom || !this.contentDOM) return true\n\n    if ((mutation.type as unknown) === 'selection') return false\n\n    if (this.contentDOM === mutation.target && mutation.type === 'attributes')\n      return true\n\n    if (this.contentDOM.contains(mutation.target)) return false\n\n    return true\n  }\n}\n\ndefIfNotExists('milkdown-table-block', TableElement)\nexport const tableBlockView = $view(\n  tableSchema.node,\n  (ctx): NodeViewConstructor => {\n    return (initialNode, view, getPos) => {\n      return new TableNodeView(ctx, initialNode, view, getPos)\n    }\n  }\n)\n\nwithMeta(tableBlockView, {\n  displayName: 'NodeView<table-block>',\n  group: 'TableBlock',\n})\n","export function defIfNotExists(\n  tagName: string,\n  element: CustomElementConstructor\n) {\n  const current = customElements.get(tagName)\n  if (current == null) {\n    customElements.define(tagName, element)\n    return\n  }\n\n  if (current === element) return\n\n  // eslint-disable-next-line no-console\n  console.warn(`Custom element ${tagName} has been defined before.`)\n}\n","import type { MilkdownPlugin } from '@milkdown/ctx'\nimport { tableBlockView } from './view'\nimport { tableBlockConfig } from './config'\n\nexport * from './view'\nexport * from './config'\n\nexport const tableBlock: MilkdownPlugin[] = [tableBlockConfig, tableBlockView]\n","import {\n  tableBlock,\n  tableBlockConfig,\n} from '@milkdown/kit/component/table-block'\nimport type { DefineFeature, Icon } from '../shared'\nimport {\n  alignCenterIcon,\n  alignLeftIcon,\n  alignRightIcon,\n  dragHandleIcon,\n  plusIcon,\n  removeIcon,\n} from '../../icons'\n\ninterface TableConfig {\n  addRowIcon: Icon\n  addColIcon: Icon\n  deleteRowIcon: Icon\n  deleteColIcon: Icon\n  alignLeftIcon: Icon\n  alignCenterIcon: Icon\n  alignRightIcon: Icon\n  colDragHandleIcon: Icon\n  rowDragHandleIcon: Icon\n}\n\nexport type TableFeatureConfig = Partial<TableConfig>\n\nexport const defineFeature: DefineFeature<TableFeatureConfig> = (\n  editor,\n  config\n) => {\n  editor\n    .config((ctx) => {\n      ctx.update(tableBlockConfig.key, (defaultConfig) => ({\n        ...defaultConfig,\n        renderButton: (renderType) => {\n          switch (renderType) {\n            case 'add_row':\n              return config?.addRowIcon?.() ?? plusIcon\n            case 'add_col':\n              return config?.addColIcon?.() ?? plusIcon\n            case 'delete_row':\n              return config?.deleteRowIcon?.() ?? removeIcon\n            case 'delete_col':\n              return config?.deleteColIcon?.() ?? removeIcon\n            case 'align_col_left':\n              return config?.alignLeftIcon?.() ?? alignLeftIcon\n            case 'align_col_center':\n              return config?.alignCenterIcon?.() ?? alignCenterIcon\n            case 'align_col_right':\n              return config?.alignRightIcon?.() ?? alignRightIcon\n            case 'col_drag_handle':\n              return config?.colDragHandleIcon?.() ?? dragHandleIcon\n            case 'row_drag_handle':\n              return config?.rowDragHandleIcon?.() ?? dragHandleIcon\n          }\n        },\n      }))\n    })\n    .use(tableBlock)\n}\n"],"names":["FUNC_ERROR_TEXT","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","freeGlobal","global","Object","freeSelf","self","root","Function","objectToString","prototype","toString","nativeMax","Math","max","nativeMin","min","now","Date","debounce","func","wait","options","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","undefined","apply","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","setTimeout","remainingWait","debounced","isInvoking","arguments","this","leadingEdge","toNumber","isObject","cancel","clearTimeout","flush","value","type","isObjectLike","call","isSymbol","other","valueOf","replace","isBinary","test","slice","module","exports","withMeta","plugin","meta","assign","__spreadValues$1","package","tableBlockConfig","$ctx","__spreadValues","renderButton","renderType","findNodeIndex","parent","child","i","childCount","getRelatedDOM","contentWrapperRef","_ref","rowIndex","columnIndex","content","current","rows","querySelectorAll","row","firstRow","headerCol","children","col","computeColHandlePositionByIndex","_ref2","refs","index","before","after","colHandleRef","hoverIndex","colHandle","dom","dataset","show","computePosition","placement","then","_ref3","x","y","style","left","top","computeRowHandlePositionByIndex","_ref4","rowHandleRef","rowHandle","_ref5","prepareDndContext","dragPreviewRef","tableWrapperRef","yLineHandleRef","xLineHandleRef","preview","wrapper","contentRoot","querySelector","previewRoot","yHandle","xHandle","handleDrag","event","ctx","fn","view","get","editorViewCtx","editable","stopPropagation","dataTransfer","effectAllowed","context","requestAnimationFrame","useDragHandlers","getPos","dragInfo","host","useHost","useMemo","getRootNode","dragRow","_ref6","_a","displayType","setAttribute","startCoords","clientX","clientY","startIndex","endIndex","direction","firstChild","removeChild","appendChild","cloneNode","height","getBoundingClientRect","width","createDragRowHandler","dragCol","_ref7","_","colIndex","Array","from","forEach","tr","parentElement","clone","createDragColHandler","useEffect","onDragEnd","onDrop","info","commands","commandsCtx","payload","to","pos","selectColCommand","key","moveColCommand","selectRowCommand","moveRowCommand","focus","onDragOver","throttle","e","offsetParent","wrapperOffsetTop","offsetTop","wrapperOffsetLeft","offsetLeft","fullWidth","leftGap","previewLeft","previewRight","startX","previewLeftOffset","find","col2","boundary","boundaryLeft","boundaryRight","right","length","yHandleWidth","contentBoundary","indexOf","middleware","offset","_ref8","fullHeight","topGap","previewTop","previewBottom","startY","previewTopOffset","row2","boundaryTop","boundaryBottom","bottom","xHandleHeight","_ref9","createDragOverHandler","addEventListener","removeEventListener","createPointerMoveHandler","lineHoverIndex","_b","_c","posAtCoords","inside","$pos","state","doc","resolve","node","nodeAt","cellType","rowType","cell","includes","name","findParent","node2","table","findPointerIndex","closeToBoundaryLeft","abs","closeToBoundaryRight","closeToBoundaryTop","closeToBoundaryBottom","closeToBoundary","rowButtonGroup","colButtonGroup","_ref10","_ref11","usePointerHandlers","pointerMove","pointerLeave","createPointerLeaveHandler","displayName","group","tableComponent","_ref12","config","useRef","useLayoutEffect","contentDOM","selection","CellSelection","$from","findTable","isColSelection","$head","depth","handleDOM","isRowSelection","rowNode","recoveryStateBetweenUpdate","onAddRow","onAddCol","selectCol","selectRow","deleteSelected","onAlign","useCallback","addRowAfterCommand","addRowBeforeCommand","_d","cols","addColAfterCommand","addColBeforeCommand","buttonGroup","preventDefault","deleteSelectedCellsCommand","setAlignCommand","useOperation","html","clsx","props","TableElement","c","_TableNodeView_instances","handleClick_fn","TableNodeView","constructor","document","createElement","classList","add","update","sameMarkup","eq","stopEvent","startsWith","target","HTMLButtonElement","HTMLElement","closest","__privateMethod","ignoreMutation","mutation","contains","WeakSet","dispatch","TextSelection","currentNode","NodeSelection","create","setSelection","scrollIntoView","tagName","element","customElements","console","warn","define","defIfNotExists","tableBlockView","$view","tableSchema","initialNode","tableBlock","defineFeature","editor","defaultConfig","_e","_f","_g","_h","_i","_j","_k","_l","_m","_n","_o","_p","_q","_r","addRowIcon","plusIcon","addColIcon","deleteRowIcon","removeIcon","deleteColIcon","alignLeftIcon","alignCenterIcon","alignRightIcon","colDragHandleIcon","dragHandleIcon","rowDragHandleIcon","use"],"sourceRoot":""}