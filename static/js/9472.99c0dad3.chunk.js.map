{"version":3,"file":"static/js/9472.99c0dad3.chunk.js","mappings":"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","sources":["../node_modules/lodash.throttle/index.js","../node_modules/@milkdown/components/src/__internal__/meta.ts","../node_modules/@milkdown/components/src/link-tooltip/slices.ts","../node_modules/@milkdown/components/src/link-tooltip/tooltips.ts","../node_modules/@milkdown/components/src/__internal__/helper.ts","../node_modules/@milkdown/components/src/link-tooltip/preview/preview-component.ts","../node_modules/@milkdown/components/src/link-tooltip/preview/preview-view.ts","../node_modules/@milkdown/components/src/link-tooltip/preview/preview-configure.ts","../node_modules/@milkdown/components/src/link-tooltip/utils.ts","../node_modules/@milkdown/components/src/link-tooltip/edit/edit-component.ts","../node_modules/@milkdown/components/src/link-tooltip/edit/edit-view.ts","../node_modules/@milkdown/components/src/link-tooltip/configure.ts","../node_modules/@milkdown/components/src/link-tooltip/edit/edit-configure.ts","../node_modules/@milkdown/components/src/link-tooltip/index.ts","../node_modules/@milkdown/plugin-tooltip/src/tooltip-provider.ts","../node_modules/@milkdown/plugin-tooltip/src/tooltip-plugin.ts","../node_modules/@milkdown/crepe/src/feature/link-tooltip/index.ts"],"sourcesContent":["/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = throttle;\n","import type { Meta, MilkdownPlugin } from '@milkdown/ctx'\n\nexport function withMeta<T extends MilkdownPlugin>(\n  plugin: T,\n  meta: Partial<Meta> & Pick<Meta, 'displayName'>\n): T {\n  Object.assign(plugin, {\n    meta: {\n      package: '@milkdown/components',\n      ...meta,\n    },\n  })\n\n  return plugin\n}\n","import { $ctx } from '@milkdown/utils'\nimport type { Mark } from '@milkdown/prose/model'\nimport { html } from 'atomico'\nimport { withMeta } from '../__internal__/meta'\n\nexport interface LinkToolTipState {\n  mode: 'preview' | 'edit'\n}\n\nconst defaultState: LinkToolTipState = {\n  mode: 'preview',\n}\n\nexport const linkTooltipState = $ctx({ ...defaultState }, 'linkTooltipStateCtx')\n\nwithMeta(linkTooltipState, {\n  displayName: 'State<link-tooltip>',\n  group: 'LinkTooltip',\n})\n\nexport interface LinkTooltipAPI {\n  addLink: (from: number, to: number) => void\n  editLink: (mark: Mark, from: number, to: number) => void\n  removeLink: (from: number, to: number) => void\n}\n\nconst defaultAPI: LinkTooltipAPI = {\n  addLink: () => {},\n  editLink: () => {},\n  removeLink: () => {},\n}\n\nexport const linkTooltipAPI = $ctx({ ...defaultAPI }, 'linkTooltipAPICtx')\n\nwithMeta(linkTooltipState, {\n  displayName: 'API<link-tooltip>',\n  group: 'LinkTooltip',\n})\n\nexport interface LinkTooltipConfig {\n  linkIcon: () => ReturnType<typeof html>\n  editButton: () => ReturnType<typeof html>\n  confirmButton: () => ReturnType<typeof html>\n  removeButton: () => ReturnType<typeof html>\n  onCopyLink: (link: string) => void\n  inputPlaceholder: string\n}\n\nconst defaultConfig: LinkTooltipConfig = {\n  linkIcon: () => 'ðŸ”—',\n  editButton: () => 'âœŽ',\n  removeButton: () => 'âŒ«',\n  confirmButton: () => html`Confirm âŽ`,\n  onCopyLink: () => {},\n  inputPlaceholder: 'Paste link...',\n}\n\nexport const linkTooltipConfig = $ctx(\n  {\n    ...defaultConfig,\n  },\n  'linkTooltipConfigCtx'\n)\n\nwithMeta(linkTooltipState, {\n  displayName: 'Config<link-tooltip>',\n  group: 'LinkTooltip',\n})\n","import { tooltipFactory } from '@milkdown/plugin-tooltip'\nimport { withMeta } from '../__internal__/meta'\n\nexport const linkPreviewTooltip = tooltipFactory('LINK_PREVIEW')\nwithMeta(linkPreviewTooltip[0], {\n  displayName: 'PreviewTooltipSpec<link-tooltip>',\n  group: 'LinkTooltip',\n})\nwithMeta(linkPreviewTooltip[1], {\n  displayName: 'PreviewTooltipPlugin<link-tooltip>',\n  group: 'LinkTooltip',\n})\nexport const linkEditTooltip = tooltipFactory('LINK_EDIT')\nwithMeta(linkEditTooltip[0], {\n  displayName: 'EditTooltipSpec<link-tooltip>',\n  group: 'LinkTooltip',\n})\nwithMeta(linkEditTooltip[1], {\n  displayName: 'EditTooltipPlugin<link-tooltip>',\n  group: 'LinkTooltip',\n})\n","export function defIfNotExists(\n  tagName: string,\n  element: CustomElementConstructor\n) {\n  const current = customElements.get(tagName)\n  if (current == null) {\n    customElements.define(tagName, element)\n    return\n  }\n\n  if (current === element) return\n\n  // eslint-disable-next-line no-console\n  console.warn(`Custom element ${tagName} has been defined before.`)\n}\n","import type { Component } from 'atomico'\nimport { c, html } from 'atomico'\nimport type { LinkTooltipConfig } from '../slices'\n\nexport interface LinkPreviewProps {\n  config: LinkTooltipConfig\n  src: string\n  onEdit: () => void\n  onRemove: () => void\n}\n\nexport const linkPreviewComponent: Component<LinkPreviewProps> = ({\n  config,\n  src,\n  onEdit,\n  onRemove,\n}) => {\n  const onClickEditButton = (e: MouseEvent) => {\n    e.stopPropagation()\n    e.preventDefault()\n    onEdit?.()\n  }\n\n  const onClickRemoveButton = (e: MouseEvent) => {\n    e.stopPropagation()\n    e.preventDefault()\n    onRemove?.()\n  }\n\n  const onClickPreview = (e: MouseEvent) => {\n    e.preventDefault()\n    if (navigator.clipboard && src) {\n      navigator.clipboard\n        .writeText(src)\n        .then(() => {\n          config?.onCopyLink(src)\n        })\n        .catch((e) => {\n          throw e\n        })\n    }\n  }\n\n  return html`\n    <host>\n      <div class=\"link-preview\" onmousedown=${onClickPreview}>\n        <span class=\"link-icon\"> ${config?.linkIcon()} </span>\n        <a href=${src} target=\"_blank\" class=\"link-display\">${src}</a>\n        <span class=\"button link-edit-button\" onmousedown=${onClickEditButton}>\n          ${config?.editButton()}\n        </span>\n        <span\n          class=\"button link-remove-button\"\n          onmousedown=${onClickRemoveButton}\n        >\n          ${config?.removeButton()}\n        </span>\n      </div>\n    </host>\n  `\n}\n\nlinkPreviewComponent.props = {\n  config: Object,\n  src: String,\n  onEdit: Function,\n  onRemove: Function,\n}\n\nexport const LinkPreviewElement = c(linkPreviewComponent)\n","import type { PluginView } from '@milkdown/prose/state'\nimport type { EditorView } from '@milkdown/prose/view'\nimport type { Mark } from '@milkdown/prose/model'\nimport { TooltipProvider } from '@milkdown/plugin-tooltip'\nimport type { Ctx, Slice } from '@milkdown/ctx'\nimport type { LinkToolTipState } from '../slices'\nimport { linkTooltipAPI, linkTooltipConfig, linkTooltipState } from '../slices'\nimport { LinkPreviewElement } from './preview-component'\n\nexport class LinkPreviewTooltip implements PluginView {\n  #content = new LinkPreviewElement()\n  #provider: TooltipProvider\n  #slice: Slice<LinkToolTipState> = this.ctx.use(linkTooltipState.key)\n\n  #hovering = false\n\n  constructor(\n    readonly ctx: Ctx,\n    view: EditorView\n  ) {\n    this.#provider = new TooltipProvider({\n      debounce: 0,\n      content: this.#content,\n      shouldShow: () => false,\n    })\n    this.#provider.update(view)\n    this.#slice = ctx.use(linkTooltipState.key)\n    this.#slice.on(this.#onStateChange)\n  }\n\n  #onStateChange = ({ mode }: LinkToolTipState) => {\n    if (mode === 'edit') this.#hide()\n  }\n\n  #onMouseEnter = () => {\n    this.#hovering = true\n  }\n\n  #onMouseLeave = () => {\n    this.#hovering = false\n  }\n\n  #hide = () => {\n    this.#provider.hide()\n    this.#provider.element.removeEventListener('mouseenter', this.#onMouseEnter)\n    this.#provider.element.removeEventListener('mouseleave', this.#onMouseLeave)\n  }\n\n  show = (mark: Mark, from: number, to: number, rect: DOMRect) => {\n    this.#content.config = this.ctx.get(linkTooltipConfig.key)\n    this.#content.src = mark.attrs.href\n    this.#content.onEdit = () => {\n      this.ctx.get(linkTooltipAPI.key).editLink(mark, from, to)\n    }\n    this.#content.onRemove = () => {\n      this.ctx.get(linkTooltipAPI.key).removeLink(from, to)\n      this.#hide()\n    }\n\n    this.#provider.show({\n      getBoundingClientRect: () => rect,\n    })\n    this.#provider.element.addEventListener('mouseenter', this.#onMouseEnter)\n    this.#provider.element.addEventListener('mouseleave', this.#onMouseLeave)\n  }\n\n  hide = () => {\n    if (this.#hovering) return\n\n    this.#hide()\n  }\n\n  update = () => {}\n\n  destroy = () => {\n    this.#slice.off(this.#onStateChange)\n    this.#provider.destroy()\n    this.#content.remove()\n  }\n}\n","import type { Ctx } from '@milkdown/ctx'\nimport debounce from 'lodash.debounce'\nimport type { EditorView } from '@milkdown/prose/view'\nimport { posToDOMRect } from '@milkdown/prose'\nimport { linkTooltipState } from '../slices'\nimport { findMarkPosition, shouldShowPreviewWhenHover } from '../utils'\nimport { linkPreviewTooltip } from '../tooltips'\nimport { defIfNotExists } from '../../__internal__/helper'\nimport { LinkPreviewTooltip } from './preview-view'\nimport { LinkPreviewElement } from './preview-component'\n\ndefIfNotExists('milkdown-link-preview', LinkPreviewElement)\nexport function configureLinkPreviewTooltip(ctx: Ctx) {\n  let linkPreviewTooltipView: LinkPreviewTooltip | null\n\n  const DELAY = 200\n  const onMouseMove = debounce((view: EditorView, event: MouseEvent) => {\n    if (!linkPreviewTooltipView) return\n    if (!view.hasFocus()) return\n\n    const state = ctx.get(linkTooltipState.key)\n    if (state.mode === 'edit') return\n\n    const result = shouldShowPreviewWhenHover(ctx, view, event)\n    if (result) {\n      const position = view.state.doc.resolve(result.pos)\n      const markPosition = findMarkPosition(\n        result.mark,\n        result.node,\n        view.state.doc,\n        position.before(),\n        position.after()\n      )\n      const from = markPosition.start\n      const to = markPosition.end\n      linkPreviewTooltipView.show(\n        result.mark,\n        from,\n        to,\n        posToDOMRect(view, from, to)\n      )\n      return\n    }\n\n    linkPreviewTooltipView.hide()\n  }, DELAY)\n\n  const onMouseLeave = () => {\n    setTimeout(() => {\n      linkPreviewTooltipView?.hide()\n    }, DELAY)\n  }\n\n  ctx.set(linkPreviewTooltip.key, {\n    props: {\n      handleDOMEvents: {\n        mousemove: onMouseMove,\n        mouseleave: onMouseLeave,\n      },\n    },\n    view: (view) => {\n      linkPreviewTooltipView = new LinkPreviewTooltip(ctx, view)\n      return linkPreviewTooltipView\n    },\n  })\n}\n","import type { Mark, Node } from '@milkdown/prose/model'\nimport type { Ctx } from '@milkdown/ctx'\nimport type { EditorView } from '@milkdown/prose/view'\nimport { linkSchema } from '@milkdown/preset-commonmark'\nimport { linkPreviewTooltip } from './tooltips'\n\nexport function findMarkPosition(\n  mark: Mark,\n  node: Node,\n  doc: Node,\n  from: number,\n  to: number\n) {\n  let markPos = { start: -1, end: -1 }\n  doc.nodesBetween(from, to, (n, pos) => {\n    // stop recursive finding if result is found\n    if (markPos.start > -1) return false\n\n    if (markPos.start === -1 && mark.isInSet(n.marks) && node === n) {\n      markPos = {\n        start: pos,\n        end: pos + Math.max(n.textContent.length, 1),\n      }\n    }\n\n    return undefined\n  })\n\n  return markPos\n}\n\nexport function shouldShowPreviewWhenHover(\n  ctx: Ctx,\n  view: EditorView,\n  event: MouseEvent\n) {\n  const $pos = view.posAtCoords({ left: event.clientX, top: event.clientY })\n  if (!$pos) return\n\n  const { pos } = $pos\n  const node = view.state.doc.nodeAt(pos)\n\n  if (!node) return\n\n  const mark = node.marks.find(\n    (mark) => mark.type === linkSchema.mark.type(ctx)\n  )\n  if (!mark) return\n\n  const key = linkPreviewTooltip.pluginKey()\n  if (!key) return\n\n  return { show: true, pos, node, mark }\n}\n","import type { Component } from 'atomico'\nimport { c, html, useEffect, useRef, useState } from 'atomico'\nimport clsx from 'clsx'\nimport type { LinkTooltipConfig } from '../slices'\n\nexport interface LinkEditProps {\n  config: LinkTooltipConfig\n  src: string\n  onConfirm: (href: string) => void\n  onCancel: () => void\n}\n\nexport const linkEditComponent: Component<LinkEditProps> = ({\n  src,\n  onConfirm,\n  onCancel,\n  config,\n}) => {\n  const linkInput = useRef<HTMLInputElement>()\n  const [link, setLink] = useState(src)\n\n  useEffect(() => {\n    setLink(src ?? '')\n  }, [src])\n\n  const onConfirmEdit = () => {\n    onConfirm?.(linkInput.current?.value ?? '')\n  }\n\n  const onKeydown = (e: KeyboardEvent) => {\n    e.stopPropagation()\n    if (e.key === 'Enter') {\n      onConfirm?.(linkInput.current?.value ?? '')\n      e.preventDefault()\n    }\n    if (e.key === 'Escape') {\n      onCancel?.()\n      e.preventDefault()\n    }\n  }\n\n  return html`\n    <host>\n      <div class=\"link-edit\">\n        <input\n          class=\"input-area\"\n          placeholder=${config?.inputPlaceholder}\n          ref=${linkInput}\n          onkeydown=${onKeydown}\n          oninput=${(e: InputEvent) =>\n            setLink((e.target as HTMLInputElement).value)}\n          value=${link}\n        />\n        <span\n          class=${clsx('button confirm', !link && 'hidden')}\n          onclick=${onConfirmEdit}\n        >\n          ${config?.confirmButton()}\n        </span>\n      </div>\n    </host>\n  `\n}\n\nlinkEditComponent.props = {\n  config: Object,\n  src: String,\n  onConfirm: Function,\n  onCancel: Function,\n}\n\nexport const LinkEditElement = c(linkEditComponent)\n","import type { Ctx } from '@milkdown/ctx'\nimport { TextSelection } from '@milkdown/prose/state'\nimport type { PluginView } from '@milkdown/prose/state'\nimport type { Mark } from '@milkdown/prose/model'\nimport type { EditorView } from '@milkdown/prose/view'\nimport { TooltipProvider } from '@milkdown/plugin-tooltip'\nimport { editorViewCtx } from '@milkdown/core'\nimport { linkSchema } from '@milkdown/preset-commonmark'\nimport { posToDOMRect } from '@milkdown/prose'\nimport { linkTooltipConfig, linkTooltipState } from '../slices'\nimport { LinkEditElement } from './edit-component'\n\ninterface Data {\n  from: number\n  to: number\n  mark: Mark | null\n}\n\nconst defaultData: Data = {\n  from: -1,\n  to: -1,\n  mark: null,\n}\n\nexport class LinkEditTooltip implements PluginView {\n  #content = new LinkEditElement()\n  #provider: TooltipProvider\n  #data: Data = { ...defaultData }\n\n  constructor(\n    readonly ctx: Ctx,\n    view: EditorView\n  ) {\n    this.#provider = new TooltipProvider({\n      content: this.#content,\n      debounce: 0,\n      shouldShow: () => false,\n    })\n    this.#provider.onHide = () => {\n      this.#content.update().catch((e) => {\n        throw e\n      })\n      view.dom.focus({ preventScroll: true })\n    }\n    this.#provider.update(view)\n    this.#content.onConfirm = this.#confirmEdit\n    this.#content.onCancel = this.#reset\n  }\n\n  #reset = () => {\n    this.#provider.hide()\n    this.ctx.update(linkTooltipState.key, (state) => ({\n      ...state,\n      mode: 'preview' as const,\n    }))\n    this.#data = { ...defaultData }\n  }\n\n  #confirmEdit = (href: string) => {\n    const view = this.ctx.get(editorViewCtx)\n    const { from, to, mark } = this.#data\n    const type = linkSchema.type(this.ctx)\n    if (mark && mark.attrs.href === href) {\n      this.#reset()\n      return\n    }\n\n    const tr = view.state.tr\n    if (mark) tr.removeMark(from, to, mark)\n\n    tr.addMark(from, to, type.create({ href }))\n    view.dispatch(tr)\n\n    this.#reset()\n  }\n\n  #enterEditMode = (value: string, from: number, to: number) => {\n    const config = this.ctx.get(linkTooltipConfig.key)\n    this.#content.config = config\n    this.#content.src = value\n    this.ctx.update(linkTooltipState.key, (state) => ({\n      ...state,\n      mode: 'edit' as const,\n    }))\n    const view = this.ctx.get(editorViewCtx)\n    // this.#setRect(posToDOMRect(view, from, to))\n    view.dispatch(\n      view.state.tr.setSelection(TextSelection.create(view.state.doc, from, to))\n    )\n    this.#provider.show({\n      getBoundingClientRect: () => posToDOMRect(view, from, to),\n    })\n    requestAnimationFrame(() => {\n      this.#content.querySelector('input')?.focus()\n    })\n  }\n\n  update = (view: EditorView) => {\n    const { state } = view\n    const { selection } = state\n    if (!(selection instanceof TextSelection)) return\n    const { from, to } = selection\n    if (from === this.#data.from && to === this.#data.to) return\n\n    this.#reset()\n  }\n\n  destroy = () => {\n    this.#provider.destroy()\n    this.#content.remove()\n  }\n\n  addLink = (from: number, to: number) => {\n    this.#data = {\n      from,\n      to,\n      mark: null,\n    }\n    this.#enterEditMode('', from, to)\n  }\n\n  editLink = (mark: Mark, from: number, to: number) => {\n    this.#data = {\n      from,\n      to,\n      mark,\n    }\n    this.#enterEditMode(mark.attrs.href, from, to)\n  }\n\n  removeLink = (from: number, to: number) => {\n    const view = this.ctx.get(editorViewCtx)\n\n    const tr = view.state.tr\n    tr.removeMark(from, to, linkSchema.type(this.ctx))\n    view.dispatch(tr)\n\n    this.#reset()\n  }\n}\n","import type { Ctx } from '@milkdown/ctx'\nimport { configureLinkPreviewTooltip } from './preview/preview-configure'\nimport { configureLinkEditTooltip } from './edit/edit-configure'\n\nexport function configureLinkTooltip(ctx: Ctx) {\n  configureLinkPreviewTooltip(ctx)\n  configureLinkEditTooltip(ctx)\n}\n","import type { Ctx } from '@milkdown/ctx'\nimport { linkTooltipAPI } from '../slices'\nimport { linkEditTooltip } from '../tooltips'\nimport { defIfNotExists } from '../../__internal__/helper'\nimport { LinkEditElement } from './edit-component'\nimport { LinkEditTooltip } from './edit-view'\n\ndefIfNotExists('milkdown-link-edit', LinkEditElement)\nexport function configureLinkEditTooltip(ctx: Ctx) {\n  let linkEditTooltipView: LinkEditTooltip | null\n\n  ctx.update(linkTooltipAPI.key, (api) => ({\n    ...api,\n    addLink: (from, to) => {\n      linkEditTooltipView?.addLink(from, to)\n    },\n    editLink: (mark, from, to) => {\n      linkEditTooltipView?.editLink(mark, from, to)\n    },\n    removeLink: (from, to) => {\n      linkEditTooltipView?.removeLink(from, to)\n    },\n  }))\n\n  ctx.set(linkEditTooltip.key, {\n    view: (view) => {\n      linkEditTooltipView = new LinkEditTooltip(ctx, view)\n      return linkEditTooltipView\n    },\n  })\n}\n","import type { MilkdownPlugin } from '@milkdown/ctx'\nimport { linkTooltipAPI, linkTooltipConfig, linkTooltipState } from './slices'\nimport { linkEditTooltip, linkPreviewTooltip } from './tooltips'\n\nexport * from './slices'\nexport * from './configure'\nexport * from './tooltips'\n\nexport const linkTooltipPlugin: MilkdownPlugin[] = [\n  linkTooltipState,\n  linkTooltipAPI,\n  linkTooltipConfig,\n  linkPreviewTooltip,\n  linkEditTooltip,\n].flat()\n","import type { EditorState } from '@milkdown/prose/state'\nimport { TextSelection } from '@milkdown/prose/state'\nimport type { EditorView } from '@milkdown/prose/view'\nimport throttle from 'lodash.throttle'\nimport type {\n  ComputePositionConfig,\n  Middleware,\n  VirtualElement,\n} from '@floating-ui/dom'\nimport { computePosition, flip, offset, shift } from '@floating-ui/dom'\nimport { posToDOMRect } from '@milkdown/prose'\n\n/// Options for tooltip provider.\nexport interface TooltipProviderOptions {\n  /// The tooltip content.\n  content: HTMLElement\n  /// The debounce time for updating tooltip, 200ms by default.\n  debounce?: number\n  /// The function to determine whether the tooltip should be shown.\n  shouldShow?: (view: EditorView, prevState?: EditorState) => boolean\n  /// The offset to get the block. Default is 0.\n  offset?:\n    | number\n    | {\n        mainAxis?: number\n        crossAxis?: number\n        alignmentAxis?: number | null\n      }\n  /// Other middlewares for floating ui. This will be added after the internal middlewares.\n  middleware?: Middleware[]\n  /// Options for floating ui. If you pass `middleware` or `placement`, it will override the internal settings.\n  floatingUIOptions?: Partial<ComputePositionConfig>\n  /// The root element that the tooltip will be appended to.\n  root?: HTMLElement\n}\n\n/// A provider for creating tooltip.\nexport class TooltipProvider {\n  /// @internal\n  readonly #debounce: number\n\n  /// @internal\n  readonly #shouldShow: (view: EditorView, prevState?: EditorState) => boolean\n\n  /// @internal\n  readonly #middleware: Middleware[]\n\n  /// @internal\n  readonly #floatingUIOptions: Partial<ComputePositionConfig>\n\n  /// @internal\n  readonly #root?: HTMLElement\n\n  /// @internal\n  #initialized = false\n\n  /// @internal\n  readonly #offset?:\n    | number\n    | {\n        mainAxis?: number\n        crossAxis?: number\n        alignmentAxis?: number | null\n      }\n\n  /// The root element of the tooltip.\n  element: HTMLElement\n\n  /// On show callback.\n  onShow = () => {}\n\n  /// On hide callback.\n  onHide = () => {}\n\n  constructor(options: TooltipProviderOptions) {\n    this.element = options.content\n    this.#debounce = options.debounce ?? 200\n    this.#shouldShow = options.shouldShow ?? this.#_shouldShow\n    this.#offset = options.offset\n    this.#middleware = options.middleware ?? []\n    this.#floatingUIOptions = options.floatingUIOptions ?? {}\n    this.#root = options.root\n    this.element.dataset.show = 'false'\n  }\n\n  /// @internal\n  #onUpdate = (view: EditorView, prevState?: EditorState): void => {\n    const { state, composing } = view\n    const { selection, doc } = state\n    const { ranges } = selection\n    const from = Math.min(...ranges.map((range) => range.$from.pos))\n    const to = Math.max(...ranges.map((range) => range.$to.pos))\n    const isSame =\n      prevState && prevState.doc.eq(doc) && prevState.selection.eq(selection)\n\n    if (!this.#initialized) {\n      const root = this.#root ?? view.dom.parentElement ?? document.body\n      root.appendChild(this.element)\n      this.#initialized = true\n    }\n\n    if (composing || isSame) return\n\n    if (!this.#shouldShow(view, prevState)) {\n      this.hide()\n      return\n    }\n\n    const virtualEl: VirtualElement = {\n      getBoundingClientRect: () => posToDOMRect(view, from, to),\n    }\n    computePosition(virtualEl, this.element, {\n      placement: this.#floatingUIOptions.placement ?? 'top',\n      middleware: [flip(), offset(this.#offset), shift(), ...this.#middleware],\n    }).then(({ x, y }) => {\n      Object.assign(this.element.style, {\n        left: `${x}px`,\n        top: `${y}px`,\n      })\n    })\n\n    this.show()\n  }\n\n  /// Update provider state by editor view.\n  update = (view: EditorView, prevState?: EditorState): void => {\n    const updater = throttle(this.#onUpdate, this.#debounce)\n\n    updater(view, prevState)\n  }\n\n  /// @internal\n  #_shouldShow(view: EditorView): boolean {\n    const { doc, selection } = view.state\n    const { empty, from, to } = selection\n\n    const isEmptyTextBlock =\n      !doc.textBetween(from, to).length &&\n      view.state.selection instanceof TextSelection\n\n    const isTooltipChildren = this.element.contains(document.activeElement)\n\n    const notHasFocus = !view.hasFocus() && !isTooltipChildren\n\n    const isReadonly = !view.editable\n\n    if (notHasFocus || empty || isEmptyTextBlock || isReadonly) return false\n\n    return true\n  }\n\n  /// Destroy the tooltip.\n  destroy = () => {}\n\n  /// Show the tooltip.\n  show = (virtualElement?: VirtualElement) => {\n    this.element.dataset.show = 'true'\n\n    if (virtualElement) {\n      computePosition(virtualElement, this.element, {\n        placement: 'top',\n        middleware: [flip(), offset(this.#offset)],\n        ...this.#floatingUIOptions,\n      }).then(({ x, y }) => {\n        Object.assign(this.element.style, {\n          left: `${x}px`,\n          top: `${y}px`,\n        })\n      })\n    }\n\n    this.onShow()\n  }\n\n  /// Hide the tooltip.\n  hide = () => {\n    if (this.element.dataset.show === 'false') return\n    this.element.dataset.show = 'false'\n\n    this.onHide()\n  }\n}\n","import type { SliceType } from '@milkdown/ctx'\nimport type { PluginSpec } from '@milkdown/prose/state'\nimport { Plugin, PluginKey } from '@milkdown/prose/state'\nimport type { $Ctx, $Prose } from '@milkdown/utils'\nimport { $ctx, $prose } from '@milkdown/utils'\n\n/// @internal\nexport type TooltipSpecId<Id extends string> = `${Id}_TOOLTIP_SPEC`\n\n/// @internal\nexport type TooltipPlugin<Id extends string, State = any> = [\n  $Ctx<PluginSpec<State>, TooltipSpecId<Id>>,\n  $Prose,\n] & {\n  key: SliceType<PluginSpec<State>, TooltipSpecId<Id>>\n  pluginKey: $Prose['key']\n}\n\n/// Create a tooltip plugin with a unique id.\nexport function tooltipFactory<Id extends string, State = any>(id: Id) {\n  const tooltipSpec = $ctx<PluginSpec<State>, TooltipSpecId<Id>>(\n    {},\n    `${id}_TOOLTIP_SPEC`\n  )\n  const tooltipPlugin = $prose((ctx) => {\n    const spec = ctx.get(tooltipSpec.key)\n    return new Plugin({\n      key: new PluginKey(`${id}_TOOLTIP`),\n      ...spec,\n    })\n  })\n  const result = [tooltipSpec, tooltipPlugin] as TooltipPlugin<Id>\n  result.key = tooltipSpec.key\n  result.pluginKey = tooltipPlugin.key\n  tooltipSpec.meta = {\n    package: '@milkdown/plugin-tooltip',\n    displayName: `Ctx<tooltipSpec>|${id}`,\n  }\n  tooltipPlugin.meta = {\n    package: '@milkdown/plugin-tooltip',\n    displayName: `Prose<tooltip>|${id}`,\n  }\n\n  return result\n}\n","import {\n  configureLinkTooltip,\n  linkTooltipConfig,\n  linkTooltipPlugin,\n} from '@milkdown/kit/component/link-tooltip'\nimport type { DefineFeature, Icon } from '../shared'\nimport { confirmIcon, copyIcon, editIcon, removeIcon } from '../../icons'\n\ninterface LinkTooltipConfig {\n  linkIcon: Icon\n  editButton: Icon\n  removeButton: Icon\n  confirmButton: Icon\n  inputPlaceholder: string\n  onCopyLink: (link: string) => void\n}\n\nexport type LinkTooltipFeatureConfig = Partial<LinkTooltipConfig>\n\nexport const defineFeature: DefineFeature<LinkTooltipFeatureConfig> = (\n  editor,\n  config\n) => {\n  editor\n    .config(configureLinkTooltip)\n    .config((ctx) => {\n      ctx.update(linkTooltipConfig.key, (prev) => ({\n        ...prev,\n        linkIcon: config?.linkIcon ?? (() => copyIcon),\n        editButton: config?.editButton ?? (() => editIcon),\n        removeButton: config?.removeButton ?? (() => removeIcon),\n        confirmButton: config?.confirmButton ?? (() => confirmIcon),\n        inputPlaceholder: config?.inputPlaceholder ?? 'Paste link...',\n        onCopyLink: config?.onCopyLink ?? (() => {}),\n      }))\n    })\n    .use(linkTooltipPlugin)\n}\n"],"names":["FUNC_ERROR_TEXT","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","freeGlobal","global","Object","freeSelf","self","root","Function","objectToString","prototype","toString","nativeMax","Math","max","nativeMin","min","now","Date","debounce","func","wait","options","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","undefined","apply","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","setTimeout","remainingWait","debounced","isInvoking","arguments","this","leadingEdge","toNumber","isObject","cancel","clearTimeout","flush","value","type","isObjectLike","call","isSymbol","other","valueOf","replace","isBinary","test","slice","module","exports","withMeta","plugin","meta","assign","__spreadValues$3","package","linkTooltipState","$ctx","__spreadValues$2","mode","displayName","group","linkTooltipAPI","addLink","editLink","removeLink","defaultConfig","linkIcon","editButton","removeButton","confirmButton","html","onCopyLink","inputPlaceholder","linkTooltipConfig","linkPreviewTooltip","tooltipFactory","linkEditTooltip","defIfNotExists","tagName","element","current","customElements","get","console","warn","define","linkPreviewComponent","_ref","config","src","onEdit","onRemove","e","preventDefault","navigator","clipboard","writeText","then","catch","e2","stopPropagation","props","String","LinkPreviewElement","c","_content$1","_provider$1","_slice","_hovering","_onStateChange","_onMouseEnter","_onMouseLeave","_hide","LinkPreviewTooltip","constructor","ctx","view","__privateAdd$1","use","key","_ref2","__privateGet$1","__privateSet$1","hide","removeEventListener","show","mark","from","to","rect","attrs","href","getBoundingClientRect","addEventListener","update","destroy","off","remove","TooltipProvider","content","shouldShow","on","configureLinkPreviewTooltip","linkPreviewTooltipView","onMouseMove","event","hasFocus","$pos","posAtCoords","left","clientX","top","clientY","pos","node","state","doc","nodeAt","marks","find","mark2","linkSchema","pluginKey","shouldShowPreviewWhenHover","position","resolve","markPosition","markPos","start","end","nodesBetween","n","isInSet","textContent","length","findMarkPosition","before","after","posToDOMRect","set","handleDOMEvents","mousemove","mouseleave","onMouseLeave","WeakMap","linkEditComponent","_ref3","onConfirm","onCancel","linkInput","useRef","link","setLink","useState","useEffect","_a","_b","target","clsx","onConfirmEdit","LinkEditElement","_content","_provider","_data","_reset","_confirmEdit","_enterEditMode","defaultData","LinkEditTooltip","__privateAdd","__spreadValues$1","__privateGet","__spreadProps$1","__privateSet","editorViewCtx","tr","removeMark","addMark","create","dispatch","setSelection","TextSelection","requestAnimationFrame","querySelector","focus","selection","onHide","dom","preventScroll","configureLinkTooltip","linkEditTooltipView","api","__spreadProps","__spreadValues","configureLinkEditTooltip","linkTooltipPlugin","flat","_TooltipProvider_instances","_debounce","_shouldShow","_middleware","_floatingUIOptions","_root","_initialized","_offset","_onUpdate","onShow","prevState","composing","ranges","map","range","$from","$to","isSame","eq","parentElement","document","body","appendChild","virtualEl","computePosition","placement","middleware","flip","offset","shift","x","y","style","throttle","updater","virtualElement","dataset","_shouldShow_fn","floatingUIOptions","id","tooltipSpec","tooltipPlugin","$prose","spec","Plugin","PluginKey","WeakSet","empty","isEmptyTextBlock","textBetween","isTooltipChildren","contains","activeElement","notHasFocus","isReadonly","editable","defineFeature","editor","prev","_c","_d","_e","_f","copyIcon","editIcon","removeIcon","confirmIcon"],"sourceRoot":""}